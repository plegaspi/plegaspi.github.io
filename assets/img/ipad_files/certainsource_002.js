window.CertainSourceAT=function(e){var o,a,s,d={library:"CertainSource AT",version:"1.1",defaultDomain:"link.lifi.net",types:{order:"order",conversion:"conversion"}},c=window,l=document,u=e.server_opts;if(!u.enable)return v("Not enabled"),e;function t(){var e,t={type:"empty"},r=document.getElementById("certainsource_at_"+u.siteid);if(r&&(e=r.getAttribute("data-var")),e&&window[e]&&(t=window[e],v("using data from client in '"+e+"'")),t.type==d.types.order?(o=t.email,a=t.orderId,s=t.amount):t.type==d.types.conversion&&(o=t.email,a="conversion-"+u.siteid,s=.01),a){if(p("CertainSource "+t.type+" Tracking",function(){var e="//"+u.domain+"/s/at?site="+encodeURIComponent(u.siteid)+"&page=order-confirmation";a&&(e+="&order="+encodeURIComponent(a));s&&(e+="&amount="+encodeURIComponent(s));o&&(e+="&e="+encodeURIComponent(o)+"&ef="+(u.emailFormat||"e"));return e}()),u.hasOwnProperty("order")&&u.order.hasOwnProperty("vendors"))for(var n in u.order.vendors){m(u.order.vendors[n],a)}}else p("CertainSource Page Tracking",url="//"+u.domain+"/s/at?site="+encodeURIComponent(u.siteid)+"&page="+encodeURIComponent(c.location.pathname))}function p(e,t,r){var n;r?((n=l.createElement("iframe")).className="certainsource-at-track",n.height=n.width="1",n.setAttribute("frameBorder","0"),n.scrolling="no",n.style.display="none",n.setAttribute("role","presentation"),n.setAttribute("title","No content"),n.src=t,n.onload=r,l.body.appendChild(n)):((n=l.createElement("img")).className="certainsource-at-img",n.height=n.width="1",n.border="0",n.setAttribute("role","presentation"),n.alt="",n.src=t,l.body.appendChild(n));v(e+" ("+(r?"iframe":"image")+"): "+t)}function m(e,t){if(e&&e.url){switch(e.url=e.url.replace("<uniqueid>",function(e){var t=0;if(0==e.length)return t;for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);t=(t<<5)-t+n,t&=t}return Math.abs(t)}(t)),e.type){case"javascript":(r=l.createElement("script")).type="text/javascript",r.async=!0,r.className="certainsource-vendor-conversion",r.src=e.url,l.body.appendChild(r);break;case"image":(r=l.createElement("img")).className="certainsource-vendor-conversion",r.height=r.width="1",r.border="0",r.setAttribute("role","presentation"),i.alt="",r.src=e.url,l.body.appendChild(r);break;case"iframe":var r;(r=l.createElement("iframe")).className="certainsource-vendor-conversion",r.height=r.width="1",r.setAttribute("frameBorder","0"),r.scrolling="no",r.setAttribute("role","presentation"),i.setAttribute("title","No content"),r.style.display="none",r.src=e.url,l.body.appendChild(r);break;default:return void v("Unsupported vendor type: "+e.type)}v(e.name+" ("+e.type+"): "+e.url)}}function v(e,t){u.log&&(t?console.log(d.library+" (v"+u.version+"): ",e,t):console.log(d.library+" (v"+u.version+"): ",e))}return"complete"===l.readyState?t():c.addEventListener?c.addEventListener("load",t):c.attachEvent?c.attachEvent("onload",t):v("Could not initialize. Exiting..."),e}(window.CertainSourceAT||{});