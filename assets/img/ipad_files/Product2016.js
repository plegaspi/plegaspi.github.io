usingNamespace("Biz.Product")["MappingPrice"] = {onInit: function () {function resizeWindow() {var $content = jQuery('.centerPopup.is-static').eq(0),_w = $content.outerWidth() + 40,_h = $content.outerHeight() + 120;window.resizeTo(_w, _h);}setTimeout(resizeWindow, 500);var imgSrc = jQuery("#qrimg").attr("data-src");jQuery("#qrimg").attr("src", imgSrc);function mapPriceSwitch($switch) {if ($switch && $switch.size() > 0) {$switch.attr("checked", true);var currentId = $switch.parents(".form-cell").attr('id');jQuery(".map-price-body", $switch.parents(".form-cell").addClass("is-active")).slideDown();jQuery(".map-price-switch").each(function (index, item) {item.checked = false;});jQuery(".form-cell").each(function (index, item) {if (currentId !== jQuery(item).attr('id')) {jQuery(".map-price-body", jQuery(item).removeClass("is-active")).slideUp();}});if (jQuery(".form-cell.is-active").find(".map-price-switch").length > 0) {jQuery(".form-cell.is-active").find(".map-price-switch")[0].checked = true;}setTimeout(resizeWindow, 500);} else {return false;}}mapPriceSwitch(jQuery(".map-price-switch").eq(0));jQuery(document).on("click", ".map-price-switch", function () {return mapPriceSwitch(jQuery(this));});},sendEmail: function () {var regularPriceUrl = "";var isRegularUrl = location.href.search(/regularpurchase/i);if (isRegularUrl != -1) {regularPriceUrl = "&regularpurchase=1";}jQuery("#email").unbind('submit').submit(function () {jQuery.ajax({type: "POST",processData: true,cache: true,data: jQuery("#email").serialize(),dataType: "jsonp",url: jQuery("#email").attr("action") + "?isJSONP=true&action=Biz.Product.MappingPrice.formSubmitCallback" + regularPriceUrl,jsonpCallback: "Biz.Product.MappingPrice.formSubmitCallback"});return false;});jQuery("#email").submit();},sendSMS: function () {var regularPriceUrl = "";var isRegularUrl = location.href.search(/regularpurchase/i);if (isRegularUrl != -1) {regularPriceUrl = "&regularpurchase=1";}jQuery("#text-phone").unbind('submit').submit(function () {jQuery.ajax({type: "POST",processData: true,cache: true,data: jQuery("#text-phone").serialize(),dataType: "jsonp",url: jQuery("#text-phone").attr("action") + "?isJSONP=true&action=Biz.Product.MappingPrice.formSubmitCallback" + regularPriceUrl,jsonpCallback: "Biz.Product.MappingPrice.formSubmitCallback"});return false;});jQuery("#text-phone").submit();},formSubmitCallback: function (isSuccessful, isValidateError, type) {if (type === "EMAIL") {if (isSuccessful && !isValidateError) {jQuery("#email-send-completion").show();jQuery("#email1").val("");}} else if (type === "SMS") {if (isSuccessful && !isValidateError) {jQuery("#phoneMsg-send-completion").show();jQuery("#ShippingPhone").val("");}}},login: function () {var loginlink = Web.Config.Environment.Url.Secure + "NewMyAccount/AccountLogin.aspx";if (window.opener != null) {window.opener.location.href = loginlink + "?toJump=1&NextPage=" + encodeURIComponent(document.referrer);window.close();} else {window.location.href = loginlink;}}};usingNamespace("Biz.Product")["GoBackToCombo"] = {GoBack: function () {var Back = Biz.Product.GoBackToCombo;switch (jQuery.browser) {case jQuery.browser.msie:case jQuery.browser.opera:Back.InnerGoBack(0); break;default:Back.InnerGoBack(1); break;}},InnerGoBack: function (bsHistoryInitialLen) {if (window.history.length != bsHistoryInitialLen) {window.history.go(-1);} else {var previousLink = document.referrer;if (previousLink != "") {window.location.href = previousLink;}}}};usingNamespace("Biz.Product")["video"] = {setCookie: function () {var wsc = Web.StateManager.Cookies;var n = wsc.Name.DEVICEINFO;if (String.isNullOrEmpty(n)) {return;};wsc.save(n, { "InvodoVideoFlag": "1" });},getCookie: function () {var wsc = Web.StateManager.Cookies;var strData = wsc.get(wsc.Name.DEVICEINFO, "InvodoVideoFlag");return strData;},conversion: function (pageName, number, qty) {var data = Biz.Product.video.getCookie();if (data == "1") {Invodo.conversion("cartAdd", {p: pageName,masterProduct: number,quantity: qty});};},conversionName: function (pageName, number, qtyName) {var qty = document.getElementsByName(qtyName)[0].value;var data = Biz.Product.video.getCookie();if (data == "1") {Invodo.conversion("cartAdd", {p: pageName,masterProduct: number,quantity: qty});};},conversionCrossTable: function (pageName, mItem) {var data = Biz.Product.video.getCookie();if (data == "1") {var itemList = Biz.Product.CrossTable.getSelectedItem(mItem);if (itemList.length > 0) {for (var i = 0; i < itemList.length; i++) {Invodo.conversion("cartAdd", {p: pageName,masterProduct: itemList[i],quantity: 1});}}};},conversionCrossItemList: function (vItem, itemList) {var data = Biz.Product.video.getCookie();if (data == "1") {itemList.push(vItem);var len = itemList.length;for (var i = 0; i < len; i++) {Invodo.conversion("cartAdd", {p: "ShoppingItem_" + vItem,masterProduct: itemList[i],quantity: 1});}};},isCookie: function (affiliate) {var data = Biz.Product.video.getCookie();if (data == "1") {document.write("<script type=\"text/javascript\" src=\"http://e.invodo.com/3.0/js/invodo.js?a=" + affiliate + "\"></script>");};}};NEG.Module("Biz.Product.RecentlyViewItem", function (require) {var storage = require('Biz.Storage');var add = function (itemNumber, maxItems, groupId) {var itemList = storage.getItem("ItemViewed", new Array());var index = -1;for (var i = 0; i < itemList.length; i++) {var t = itemList[i].split("|");if (t[0] == itemNumber || (t[1] && groupId && t[1] == groupId && groupId > 0)) {index = i;break;}}if (index > -1) {itemList.splice(index, 1);}itemList.splice(0, 0, itemNumber + "|" + groupId);while (itemList.length > maxItems) {itemList.pop();}storage.setItem("ItemViewed", itemList);};return {add: add};});usingNamespace("Biz.Product")["ProductReview"] = {setReviewRange: function (a, revSumArr) {var $ = Newegg$;var pr = Biz.Product.ProductReview;var summaryType = 0;if ($("TopPaginationForm")) {summaryType = document.TopPaginationForm.SummaryType.value;}switch (a.id) {case "linkSumRange2":$("linkSumRange2").parentNode.className = "endRange";$("linkSumRange6").parentNode.className = "";$("linkSumRangeAll").parentNode.className = "";pr.writeReviewValues(0, revSumArr);summaryType = 1;break;case "linkSumRange6":$("linkSumRange2").parentNode.className = "midRange";$("linkSumRange6").parentNode.className = "endRange";$("linkSumRangeAll").parentNode.className = "";pr.writeReviewValues(1, revSumArr);summaryType = 2;break;default:$("linkSumRange2").parentNode.className = "midRange";$("linkSumRange6").parentNode.className = "midRange";$("linkSumRangeAll").parentNode.className = "endRange";pr.writeReviewValues(2, revSumArr);summaryType = 0;break;}if ($("TopPaginationForm")) {document.TopPaginationForm.SummaryType.value = summaryType;}if ($("BottomPaginationForm")) {document.BottomPaginationForm.SummaryType.value = summaryType;}return false;},initReviewRange: function (a) {var $ = Newegg$;var pr = Biz.Product.ProductReview;switch (a.id) {case "linkSumRange2":$("linkSumRange2").parentNode.className = "endRange";$("linkSumRange6").parentNode.className = "";$("linkSumRangeAll").parentNode.className = "";break;case "linkSumRange6":$("linkSumRange2").parentNode.className = "midRange";$("linkSumRange6").parentNode.className = "endRange";$("linkSumRangeAll").parentNode.className = "";break;default:$("linkSumRange2").parentNode.className = "midRange";$("linkSumRange6").parentNode.className = "midRange";$("linkSumRangeAll").parentNode.className = "endRange";break;}},selectReviewRange: function (i) {var wuf = Web.UI.Form;wuf.setValue("TopPaginationForm", "SummaryType", i);this.submit("TopPaginationForm");},writeReviewValues: function (r, revSumArr) {var $ = Newegg$;for (i = 0; i < 5; i++) {var n = i + 1;$("reviewMeter" + n).style.width = revSumArr[r][i][0] + "%";$("reviewPercent" + n).innerHTML = revSumArr[r][i][0] + "%";$("reviewNumber" + n).title = String.format(Web.Lang.reviewersGaveThisItem, revSumArr[r][i][1], n);$("reviewNumber" + n).innerHTML = revSumArr[r][i][1];if (revSumArr[r][i][1] <= 0) {$("Link" + n + "Egg").title = String.format(Web.Lang.eggReviews, n);}else {$("Link" + n + "Egg").title = String.format(Web.Lang.readEggReviews, n);}}},filterReviews: function (rv) {var $ = Newegg$;var wuf = Web.UI.Form;wuf.setValue("TopPaginationForm", "SelectedRating", rv);wuf.setValue("BottomPaginationForm", "SelectedRating", rv);var currentSort = wuf.getValue("TopPaginationForm", "SortField");if (currentSort) {var sv = Number.parse(wuf.getValue("TopPaginationForm", "SortField"));if (sv == 2 || sv == 3) {wuf.setValue("TopPaginationForm", "SortField", "0");wuf.setValue("BottomPaginationForm", "SortField", "0");}}if ($("reviewNumber" + rv) && $("reviewNumber" + rv).innerHTML == "0") {return;}this.submit("TopPaginationForm");},productFilterReviews: function (rv) {var $ = Newegg$;var wuf = Web.UI.Form;wuf.setValue("TopPaginationForm", "SelectedRating", rv);wuf.setValue("BottomPaginationForm", "SelectedRating", rv);if ($("reviewNumber" + rv) && $("reviewNumber" + rv).innerHTML == "0") {return;}for (var i = 1; i <= 5; i++) {if ($("SelectedRating" + i) && $("SelectedRating" + i).checked) {if (i == rv) {wuf.setValue("TopPaginationForm", "SelectedRating", "");wuf.setValue("BottomPaginationForm", "SelectedRating", "");};$("SelectedRating" + i).checked = false;};}this.submit("TopPaginationForm");},clearFilter: function () {var wuf = Web.UI.Form;wuf.setValue("TopPaginationForm", "SelectedRating", "");wuf.setValue("TopPaginationForm", "SummaryType", "0");wuf.setValue("TopPaginationForm", "PurchaseMark", "");wuf.setValue("TopPaginationForm", "VideoOnlyMark", "");wuf.setValue("TopPaginationForm", "VendorMark", "");wuf.setValue("TopPaginationForm", "ItemOnlyMark", "");wuf.setValue("TopPaginationForm", "Keywords", "");this.submit("TopPaginationForm");},switchReviewTab: function (data, productReviewVersion) {if (data) {if (!productReviewVersion) {productReviewVersion = 2016;}jQuery.ajax({url: Web.Config.Environment.Url.Content + "Common/Ajax/ProductReview" + productReviewVersion + ".aspx?action=Biz.Product.ProductReview.switchReviewTabCallBack",processData: false,cache: true,data: data,dataType: 'jsonp',jsonpCallback: 'Biz.Product.ProductReview.switchReviewTabCallBack'});} else {jQuery("#Community_Content -> .load").hide();}},switchReviewTabCallBack: function (jsonp) {var turntodiv = jQuery(".grpArticle .grpRating .text-wrap #turntolinks");if (turntodiv.length > 0) {jQuery("#turntohideinfo").append(turntodiv[0]);}jQuery("#Community_Content").html(jsonp.ReviewList);jQuery('.grpArticle .grpRating:first').html(jsonp.ItemRating);turntodiv = jQuery("#turntohideinfo #turntolinks");if (turntodiv.length > 0) {jQuery(".grpArticle .grpRating .text-wrap").append(turntodiv[0]);}NEG.run(function (require) {var popup = require('Biz.Common.Popup');var options = {icon: "info"};popup("[data-neg-popid='eggxpertReviews']", options);});jQuery("#Community_Content -> .load").hide();var isSwitchTab = this.getUrlParam("IsFeedbackTab") != null && this.getUrlParam("IsFeedbackTab").toLowerCase() == "true";if (isSwitchTab) {Biz.Product.Product2016.switchTab("Community_Tab");}},getUrlParam: function (name) {var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");var r = window.location.search.substr(1).match(reg);if (r != null) return unescape(r[2]); return null;},init: function () {jQuery(document).off("begin_getrelationiteminfo").on('begin_getrelationiteminfo', function (event, data) {jQuery("#TopPaginationForm input[name='Item'], #BottomPaginationForm input[name='Item']").val(data.parentItem);jQuery("#TopPaginationForm input[name='ItemOnlyMark']").val("true");Biz.Product.ProductReview.submit("TopPaginationForm");});},submit: function (formId) {var dataOverlayElement = jQuery(".grpReviews");var backgorundOverview = jQuery("<div style='background:rgb(100,100,100);opacity:.6;filter:alpha(opacity=60);text-align: center;margin: 0 auto;'></div>").css({top: dataOverlayElement.position().top,left: dataOverlayElement.position().left,zIndex: "2",position: "absolute",width: dataOverlayElement.width(),height: dataOverlayElement.height()});var loadingImagePath = Web.UI.ResourceManager.Image.build("loading32.gif");var loader = jQuery('<div style="vertical-align: middle;position: absolute;color:#fff;"><img src="' + loadingImagePath + '" /><span style="float:right;height:32px;line-height:32px">Loading...</span></div>').css({ top: "40px", left: dataOverlayElement.width() / 2 - 32 });backgorundOverview.append(loader);backgorundOverview.insertAfter(dataOverlayElement);var reviewForm = jQuery("#" + formId);function proxy(d) {return d;}jQuery.ajax({url: reviewForm.attr("action"),processData: false,cache: true,data: "review=1&" + reviewForm.serialize(),dataType: 'jsonp',jsonp: "action",jsonpCallback: 'proxy'}).done(function (jsonp) {jQuery('.grpReviews').html(jQuery(jsonp.ReviewList).html());if (formId === "BottomPaginationForm") {Biz.Product.ProductReview.scrollToReviewTop();}NEG.run(function (require) {var popup = require('Biz.Common.Popup');var options = {icon: "info"};popup("[data-neg-popid='eggxpertReviews']", options);});backgorundOverview.remove();}).fail(function () {backgorundOverview.remove();});},keywordTmp: "",innerSearch: function (f) {var $ = Newegg$;if ($("Keywords_" + f)) {if ($("Keywords_" + f).value == Web.Lang.searchKeywords) {$("Keywords_" + f).value = "";};};this.submit(f);},a: function (f) {if (window.event.keyCode == 13) {this.innerSearch(f);};},onKeyUp: function (f) {var $ = Newegg$;$("Keywords_" + f + "") && $("Keywords_" + f + "").attachEvent("onkeyup", (function () {Biz.Product.ProductReview.a(f);}));var pageEle = Web.UI.Form.getElement(f, "Page");if (pageEle) {pageEle.attachEvent("onkeyup", (function () { Biz.Product.ProductReview.a(f); }));};},initInput: function (n) {var $ = Newegg$;if ($(n)) {this.keywordTmp = $(n).value;$(n).value = "";};},restoreInput: function (n) {var $ = Newegg$;if ($(n)) {if (String.isNullOrEmpty($(n).value)) {$(n).value = Web.Lang.searchKeywords;};};},scrollToReviewTop: function () {jQuery('html, body').animate({scrollTop: jQuery('#scrollFullInfo').offset().top}, 1000);}};usingNamespace("Biz.Product")["ReviewVote"] = {form: "frmVote",iframe: "frameVote",vote: "Vote",didyou: "dyu",yesnoButton: "ynbtn",msg: "msg",flag: { "reviewId": null, display: false },queue: null,viFrame: function (rid) {var rv = Biz.Product.ReviewVote;var fm = rv.iframe + rid;var dv = (rv.flag.reviewId == rid && rv.flag.display) ? "" : "none";Web.UI.Control.setAttribute($(fm), { "style.display": dv });},isLogin: function () {var loginName = Web.StateManager.Cookies.get(Web.StateManager.Cookies.Name.LOGIN, "CONTACTWITH");return !String.isNullOrEmpty(loginName);},submit: function (rid, v, url) {var rv = Biz.Product.ReviewVote;if (rv.isLogin()) {var f = rv.form + rid;var fm = rv.iframe + rid;var dyu = rv.didyou + rid;var ynbtn = rv.yesnoButton + rid;if (!rv.queue) { rv.queue = new rv.submitQueue(rv.showSubmitMessage); };rv.flag = { "reviewId": rid, display: true };Web.UI.Form.setValue(f, rv.vote, v);Web.UI.Control.setAttribute($(fm), { "style.display": "none" });Web.UI.Control.setAttribute($(dyu), { "style.display": "none" });Web.UI.Control.setAttribute($(ynbtn), { "style.display": "none" });rv.queue.excuteSubmit(f, rid);} else {var loginUrl = Web.Config.Environment.SSLPage.Login;if (loginUrl.toLowerCase().indexOf("nextpage") == -1) { loginUrl += "?toJump=1&NextPage=" + url; };window.location.href = loginUrl;};},submitDone: function () {var rv = Biz.Product.ReviewVote;if (rv.queue) { rv.queue.submitComplete(); };},showSubmitMessage: function (id) {var rv = Biz.Product.ReviewVote;var msg = rv.msg + id;Web.UI.Control.setAttribute($(msg), { "style.display": "block" });},submitQueue: function (callback) {var submits = [];var ids = [];var isSubmiting = false;var excute = function () {isSubmiting = true;var fn = submits[0];if (String.isNullOrEmpty(fn)) { return; };Web.UI.Form.submit(fn);};this.excuteSubmit = function (fn, id) {if (String.isNullOrEmpty(fn) || String.isNullOrEmpty(id)) { return; };submits.queue(fn);ids.queue(id);if (!isSubmiting) { excute(); };};this.submitComplete = function () {submits.dequeue();var id = ids.dequeue();isSubmiting = false;if (callback) { callback(id); };if (submits.length > 0) { excute(); };};}};usingNamespace("Biz.Product")["ShowImage"] = {GalleryType: { "S": "STATIC", "F": "FLASH", "D": "DHTML" },ImageType: Sys.Enum.create("Normal", "Scene7", "SpecialScene7"),cType: "",currentId: "",currentImg: "",currentImgType: "",BaseUrl: "",ImageFolder: "",SpinSetName: "",Images: [],S640: "",S60: "",spinPlayer: "",zoomPlayer: "",spinPlayerSettings: "",zoomPlayerSettings: "",flashContentRoot: "",supportFlash: false,minVersion: "7",itemNumber: "",init: function () {var bps = Biz.Product.ShowImage;var wuc = Web.UI.Control;switch (bps.cType.toUpperCase()) {case bps.GalleryType.S:case bps.GalleryType.D:wuc.setAttribute($("ctnrSurvey"), { "style.display": "none" });wuc.setAttribute($("galleryFlash"), { "style.display": "none" });wuc.setAttribute($("galleryDHTML"), { "style.display": "" });break;default:wuc.setAttribute($("galleryFlash"), { "style.display": "" });wuc.setAttribute($("galleryDHTML"), { "style.display": "none" });break;};if (bps.cType.toUpperCase() == bps.GalleryType.D && !bps.Images.contains(bps.currentImg)) {bps.currentId = !String.isNullOrEmpty(bps.Images[0]) ? "1" : "0";};},close: function () {window.opener = top;window.self.close();},buildImage: function (n, s) {var bps = Biz.Product.ShowImage;return bps.BaseUrl + bps.ImageFolder + n + "?$" + s + "$";},buildFlashZoom: function (id) {var bps = Biz.Product.ShowImage;var wuc = Web.UI.Control;var player;var itemBase;var item;var type;var isSpin = Object.isNull(id) ? true : false;itemBase = bps.BaseUrl + '&contentRoot=' + bps.flashContentRoot + '&image=' + bps.ImageFolder;if (isSpin) {if (String.isNullOrEmpty(bps.SpinSetName)) {if (!String.isNullOrEmpty(bps.Images[0]) && bps.currentId < 1) {bps.currentId = "1";bps.buildFlashZoom(1);};return;};item = itemBase + bps.SpinSetName + bps.spinPlayerSettings;player = bps.spinPlayer;type = "_spin";} else {item = itemBase + bps.Images[id] + bps.zoomPlayerSettings;player = bps.zoomPlayer;type = "_zoom";}var so = new SWFObject(player, "integratedViewerLoader" + type, "660", "535", bps.minVersion);so.addParam("quality", "high");so.addParam("wmode", "transparent");var flashVarString = "serverUrl=" + item;var flashVarPairs = flashVarString.split("&");if (flashVarPairs.length > 0) {for (var i = 0; i < flashVarPairs.length; i++) {var nv = flashVarPairs[i].split("=");if (nv.length == 2) {so.addVariable(nv[0], nv[1]);};};};if (!isSpin) {if ($("izView")) bps.supportFlash = so.write("izView");} else {if ($("i360View")) bps.supportFlash = so.write("i360View");};},shiftImage: function (id) {var bps = Biz.Product.ShowImage;var wuc = Web.UI.Control;if (bps.cType.toUpperCase() != bps.GalleryType.S || bps.currentImgType == bps.ImageType.SpecialScene7) {wuc.setAttribute($("i360View"), { "style.display": "none" });wuc.setAttribute($("izView"), { "style.display": "" });wuc.setAttribute($("imageIndex" + bps.currentId), { "style.border": "1px solid #3a3a3a" });switch (bps.cType.toUpperCase()) {case bps.GalleryType.S:wuc.setAttribute($("CurrentImage"), { "src": bps.buildImage(bps.Images[id - 1], bps.S640) });break;case bps.GalleryType.D:var idx = id > 0 ? id - 1 : id;wuc.setAttribute($("CurrentImage"), { "src": bps.buildImage(bps.Images[id - 1], bps.S640) });break;default:bps.buildFlashZoom(id - 1);break;};wuc.setAttribute($("imageIndex" + id), { "style.border": "1px solid #f00" });bps.currentId = id;} else {wuc.setAttribute($("imageIndex" + bps.currentId), { "style.border": "1px solid #3a3a3a" });wuc.setAttribute($("CurrentImage"), { "src": bps.BaseUrl + bps.Images[id] });wuc.setAttribute($("imageIndex" + id), { "style.border": "1px solid #f00" });bps.currentId = id;};},show360: function (id) {var wuc = Web.UI.Control;var bps = Biz.Product.ShowImage;wuc.setAttribute($("izView"), { "style.display": "none" });wuc.setAttribute($("i360View"), { "style.display": "" });wuc.setAttribute($("imageIndex" + bps.currentId), { "style.border": "1px solid #3a3a3a" });wuc.setAttribute($("imageIndex" + id), { "style.border": "1px solid #f00" });bps.currentId = id;},buildThumbnails: function (n, id, fn, title, context) {var bps = Biz.Product.ShowImage;var imgclass = (context) ? "showImgSmall" : "showImgSmall nmlImg";var sb = new Sys.Text.StringBuilder();sb.appendLine('<div style="border: 1px solid black" class="' + imgclass + '" id="imageIndex' + id + '">');sb.appendLine('<a href="javascript:Biz.Product.ShowImage.' + fn + '(' + id + ',\'' + bps.itemNumber + '\');" class="noline" title="' + id + '">');sb.appendLine('<img src="' + bps.buildImage(n, bps.S60) + '" style="vertical-align: middle;" height="45" width="60" title="' + title + '" alt="' + title + '">');sb.appendLine('</a>');if (context) {sb.appendLine(context);};sb.appendLine('</div>');return sb.toString();},renderThumbnails: function (title) {var bps = Biz.Product.ShowImage;var sb = new Sys.Text.StringBuilder();if (bps.cType.toUpperCase() == bps.GalleryType.F && !String.isNullOrEmpty(bps.SpinSetName)) {sb.appendLine(bps.buildThumbnails(bps.SpinSetName, 0, "show360", title, "<span>360</span>"));};if (bps.Images.length > 0 && !String.isNullOrEmpty(bps.Images[0])) {for (var i = 0; i < bps.Images.length; i++) {bps.currentId = (bps.Images[i] == bps.currentImg) ? (i + 1) : bps.currentId;sb.appendLine(bps.buildThumbnails(bps.Images[i], (i + 1), "shiftImage", title));};};document.write(sb.toString());},detect: function () {var bps = Biz.Product.ShowImage;if (bps.currentId != 0) {bps.shiftImage(bps.currentId);} else {bps.show360(0);};if (!bps.supportFlash) {var bps = Biz.Product.ShowImage;var wuc = Web.UI.Control;wuc.setAttribute($("galleryFlash"), { "innerHTML": "" });wuc.setAttribute($("imageIndex0"), { "style.display": "none" });wuc.setAttribute($("ctnrSurvey"), { "style.display": "none" });wuc.setAttribute($("galleryDHTML"), { "style.display": "" });if (String.isNullOrEmpty(bps.Images[0])) {bps.currentId = "0";};var dn = (String.isNullOrEmpty(bps.currentId.toString()) || bps.currentId.toString() == "0") ? "1" : bps.currentId;bps.cType = bps.GalleryType.D;bps.shiftImage(dn);};}};usingNamespace("Biz.Product")["Specification"] = {TAG_SIGN: "[tag]",TAG_SIGN_PRE: "[si]",tags: [],newline: function (text) {if (String.isNullOrEmpty(text)) {return "";};text = text.decodeHtml();var spec = Biz.Product.Specification;var regHTML = new RegExp("</?[^>]*>", "ig");spec.tags = text.match(regHTML);if (spec.tags != null && spec.tags.length > 0) {text = text.replace(regHTML, spec.TAG_SIGN + spec.TAG_SIGN_PRE + spec.TAG_SIGN);};var ntext = text.split(" ");for (var i = 0; i < ntext.length; ++i) {ntext[i] = spec.add_space(ntext[i]);};return ntext.join(" ");},add_space: function (text) {var spec = Biz.Product.Specification;var hasHTMLTag = false;if (text.indexOf(spec.TAG_SIGN) >= 0) { hasHTMLTag = true; };if (hasHTMLTag) {var at = text.split(spec.TAG_SIGN);for (var i = 0; i < at.length; i++) {if (at[i] != "") {if (at[i] == spec.TAG_SIGN_PRE) {at[i] = spec.tags.shift();} else {at[i] = spec.add_space_base(at[i]);};};};return at.join("");} else {return spec.add_space_base(text);};},add_space_base: function (text) {var len = text.length;var count = Math.floor((len - 1) / 48) + 1;var ntext = [];var hasSlash = false;for (var i = 0; i < count; ++i) {if (i != 0) { ntext.push(" "); };if (Web.Environment.Browser.isIE() && !hasSlash) {hasSlash = (text.substr(i * 48, 48).substr(0, 1) == "/");};ntext.push(text.substr(i * 48, 48));};var add_spaceText = ntext.join("");if (add_spaceText.length > 1 && hasSlash) {return "<span style='word-break:break-all;'>" + add_spaceText + "</span>";} else {return add_spaceText;};},processNew: function () {if ($("segSpecs")) {var specsHeads = $("segSpecs").getElementsByTagName("legend");var specsTitles = $("segSpecs").getElementsByTagName("dt");var specsValues = $("segSpecs").getElementsByTagName("dd");var specs = new Array(specsHeads, specsTitles, specsValues);for (var i = 0; i < specs.length; i++) {specs[i].innerHTML = Biz.Product.Specification.newline(specs[i].innerHTML);};};},process: function () {if ($("pcraSpecs")) {var specs = $("pcraSpecs").getElementsByTagName("td");for (var i = 0; i < specs.length; i++) {specs[i].innerHTML = Biz.Product.Specification.newline(specs[i].innerHTML);};};}};usingNamespace("Biz.Product")["SubscribeToEmail2012"] = {nSubmit: function (subUrl) {var result = Biz.Common.NewsletterSingup.nSubmit('Newsletter', 'LoginName');if (result) {jQuery("#divNormal").css("display", "none");jQuery("#divSubmitSucceed").css("display", "block");if (Web.Config.SiteCatalyst.Enable) {Biz.Common.SiteCatalyst.sendForOnClick({ 'events': 'event21', 'eVar27': scp.pageName ? scp.pageName : (scp.cmPageName ? scp.cmPageName : void (0)), 'eVar49': 'email' }, 'email sign up');}document.forms["Newsletter"].submit();}else {document.getElementById("LoginName").focus();}},changeSubmitButton: function (input) {if (jQuery(input).length > 0) {if (jQuery(input).val() != "") {jQuery("#productSubscribte").css("display", "none");jQuery("#productSubscribteActive").css("display", "");}else {jQuery("#productSubscribte").css("display", "");jQuery("#productSubscribteActive").css("display", "none");}}}};usingNamespace("Biz.Product")["TurnTo"] = {ShowAnwers: function (flag, isShow) {if (isShow) {jQuery("#TT3IAContainer" + flag).attr("style", "display:none");jQuery("#dvHideText" + flag).attr("style", "display:none");jQuery("#dvshowText" + flag).attr("style", "display:inline");}else {jQuery("#TT3IAContainer" + flag).attr("style", "display:inline");jQuery("#dvHideText" + flag).attr("style", "display:inline");jQuery("#dvshowText" + flag).attr("style", "display:none");}}};NEG.Module("Biz.Product.Compare", function (require) {var storage = require("Biz.Storage");var $ = require("NEG.ThirdParty.JQuery");var resourceManager = require("Biz.UI.ResourceManager");var name = "Compare";var compare = function (options) {var me = arguments.callee;if (!(this instanceof me)) {return new me(options);}options = NEG.merge({'inputSelector': '.item-compare-box input','compareGroup': '.item-compare-list','maxSelected': 5,'storeID': -1,'goCompare': null,'compare': ".popover-body #gocompare",'reset': ".popover-body #compatereset",'isMasterCombo': false,'popup': '#compareListPopup','popbutton': '.item-compare-box .form-checkbox',"removebutton": "#compareListPopup .item-compare-remove","container": ".item-compare-box"}, options);var init = function () {$(options.inputSelector).on("click", selectItem);$(options.goCompareSelector).on("click", goCompare);$(options.selectAndCompare).on("click", selectAndCompare);$(options.container).on("mouseenter", showPopup);$(options.container).on("mouseleave", delayHidePopUp);$(options.compare).on("click", goCompare);$(options.reset).on("click", reset);rebuildItemHtml();};var utility = {normalizeCompareString: function (str) {return str.replace(/combo./g, "");},buildCompareString: function (compareData) {var compareString = compareData.storeID + "|";var itemString = '';for (var i = 0; i < compareData.itemList.length - 1; i++) {itemString += compareData.itemList[i] + "^" + compareData.itemList[i] + ",";}itemString += compareData.itemList[compareData.itemList.length - 1] + "^" + compareData.itemList[compareData.itemList.length - 1];return this.normalizeCompareString(compareString + itemString);}};var timerhandler;var showPopup = function () {clearTimeout(timerhandler);var compareData = storage.getItem(name, {});if (options.isMasterCombo !== compareData.isMasterCombo || !compareData.itemList || compareData.itemList.length < 1) {return;}if (!compareData.descriptionList || compareData.descriptionList.length < 1) {var compareData = storage.getItem(name, {});compareData.storeID = options.storeID;compareData.isMasterCombo = options.isMasterCombo;compareData.itemList = [];compareData.imageList = [];compareData.descriptionList = [];storage.setItem(name, compareData);return;}rebuildItemHtml();var popup = $(options.popup);$(this).append(popup);popup.css("top", "-" + (popup.height() / 2 - 10) + "px");popup.show();};var hidePopup = function () {clearTimeout(timerhandler);var popup = $(options.popup);popup.appendTo($(document.body));popup.hide();};var delayHidePopUp = function () {timerhandler = setTimeout(hidePopup, 200);};var goCompare = function () {var compareData = storage.getItem(name, null);if (!compareData.itemList || compareData.itemList.length < 2) {alert(Web.Lang.selectMore);return;}if (options.goCompare) {options.goCompare.call(api);}};var getItemByIndex = function (index) {var compareData = storage.getItem(name, null);if (!compareData || !compareData.itemList) {return null;}var itemNumber = compareData.itemList[index];return itemNumber;};var rebuildItemHtml = function () {var compareData = storage.getItem(name, {});if (options.isMasterCombo !== compareData.isMasterCombo) {return;}$(options.popup + " .items-compare").remove();var items = Biz.Product.CompareConfig.compareItems;for (var i = 0; i < items.length; i++) {$('input[neg-itemNumber=' + items[i] + ']').prop('checked', false);}if (compareData && compareData.itemList && compareData.itemList.length > 0) {for (var i = 0; i < compareData.itemList.length; i++) {var itemNumber = compareData.itemList[i];addItemHtml(i);$('input[neg-itemNumber=' + itemNumber + ']').prop('checked', true);}}var popup = $(options.popup);popup.css("top", "-" + (popup.height() / 2 - 10) + "px");$(options.removebutton).on("click", deleteItem);};var selectItem = function () {var itemNumber = $(this).attr('neg-itemNumber');(this && this.checked) ? addItem(this, itemNumber) : removeItem(itemNumber);};var selectAndCompare = function () {var compareData = storage.getItem(name, {});var itemNumber = $(this).attr('neg-itemNumber');if (compareData && compareData.itemList&& compareData.itemList.length > 0&& $.inArray(itemNumber, compareData.itemList) > -1) {goCompare();return;}addItem($('input[neg-itemNumber=' + itemNumber + ']')[0], itemNumber);goCompare();return;};var deleteItem = function () {var index = $(this).attr('neg-index');var itemNumber = getItemByIndex(index);if (itemNumber) {removeItem(itemNumber);}$('input[neg-itemNumber=' + itemNumber + ']').prop('checked', false);};var removeItem = function (itemNumber) {removeItemStorage(itemNumber);rebuildItemHtml();var compareData = storage.getItem(name, {});if (!compareData || !compareData.itemList || compareData.itemList.length < 1) {hidePopup();}};var removeItemStorage = function (itemNumber) {var compareData = storage.getItem(name, null);if (!compareData || !compareData.itemList) {return;}var index = $.inArray(itemNumber, compareData.itemList);if (index === -1) {return;}/*save localStorage*/if (!compareData.itemList) {return;}compareData.itemList = $.grep(compareData.itemList, function (n) {return n !== itemNumber;});compareData.imageList = $.grep(compareData.imageList, function (v, n) {return n !== index;});try {compareData.descriptionList = $.grep(compareData.descriptionList, function (v, n) {return n !== index;});}catch (e) { }storage.setItem(name, compareData);};var reset = function () {var compareData = storage.getItem(name, {});compareData.storeID = options.storeID;compareData.isMasterCombo = options.isMasterCombo;compareData.itemList = [];compareData.imageList = [];compareData.descriptionList = [];storage.setItem(name, compareData);rebuildItemHtml();hidePopup();};var addItem = function (input, itemNumber) {var compareData = storage.getItem(name, {});if (options.isMasterCombo !== compareData.isMasterCombo) {compareData = {};storage.setItem(name, compareData);}if (compareData.itemList && compareData.itemList.length > options.maxSelected - 1) {if (input) {$(input).attr("checked", false);}alert(Web.Lang.selectMaxItems);return;}if ($.inArray(itemNumber, compareData.itemList) > -1) {return;}var index = (compareData.itemList = (compareData.itemList || [])).push(itemNumber) - 1;var itemThumbs = Biz.Product.CompareConfig.itemThumbs;var imageUrl = itemThumbs[itemNumber];var description = $(".grpDesc h1").text().trim();compareData.storeID = options.storeID;compareData.isMasterCombo = options.isMasterCombo;(compareData.imageList = (compareData.imageList || [])).push(imageUrl);(compareData.descriptionList = (compareData.descriptionList || [])).push(description);storage.setItem(name, compareData);addItemHtml(index);rebuildItemHtml();clearTimeout(timerhandler);var popup = $(options.popup);$(input).parents(options.container).append(popup);popup.css("top", "-" + (popup.height() / 2 - 10) + "px");popup.show();$(input).attr("checked", true);};var htmlTemplate = '<div class="items-compare">'+ '<i {tracking} class="item-compare-remove fa fa-times" neg-index="{negindex}"></i>'+ '<div class="item-compare-img"><a href="{itemproductpagelink}"><img src="{itemimage}"></a></div>'+ '<div class="item-compare-desc"><a href="{itemproductpagelink}">{itemdescription}</a></div>'+ '</div>';var addItemHtml = function (index) {var compare = $(options.compareGroup);if (!compare || compare.length < 1) { return };var compareData = storage.getItem(name, {});var itemNumber = compareData.itemList[index];var imageUrl = compareData.imageList[index];var decription = compareData.descriptionList[index];var permalink = location.origin + location.pathname + "?item=" + itemNumber;if (!imageUrl) { return };var div = htmlTemplate;div = div.replace(new RegExp("{itemproductpagelink}", "gm"), permalink);div = div.replace(new RegExp("{itemimage}", "gm"), imageUrl);div = div.replace(new RegExp("{itemdescription}", "gm"), decription);div = div.replace(new RegExp("{negindex}", "gm"), index);if(document.querySelector("#item_compare_list_tracking") && document.querySelector("#item_compare_list_tracking").value){var trackingValue = document.querySelector("#item_compare_list_tracking").value.replace(new RegExp("{itemNumber}", "gm"), itemNumber);if (trackingValue) {div = div.replace(new RegExp("{tracking}", "gm"), trackingValue);}}compare.append(div);};var api = {getCompareData: function () {return storage.getItem(name, null);},getCompareString: function (data) {return utility.buildCompareString(data);},removeItemStorage: removeItemStorage};init();return api;};return compare;});usingNamespace("Biz.Product")["Product2016"] = {goImageZoomer: function () {NEG.run(function (require) {var jq = require("NEG.ThirdParty.JQuery");var imageZoomerBuilder = require("NEG.Widget.ImageZoomer");var sent52 = false;var targets = jq("span[imgzoompic]");var windowStyle = {detailWindowStyle: {border: "1px solid rgb(204,204,204)","-webkit-box-shodow": "rgba(0,0,40,0.4) 8px 5px 5px 0px","box-shadow": "rgba(0,0,40,0.4) 8px 5px 5px 0px","border-radius": "2px"}};for (var i = 0; i < targets.length; i++) {var zoomer = imageZoomerBuilder({target: targets[i],getDetailPosition: function () {return jq("#synopsis .grpArticle").offset();},getDetailSize: function () {var articleOffset = jq("#synopsis .grpArticle").offset();var optionOffset = jq(".aside .grpOptions:visible").offset();var width = optionOffset.left - articleOffset.left + jq(".aside .grpOptions:visible").innerWidth();var height = 0;jq("#synopsis .grpAside").each(function (j, obj) {var theH = jq(obj).offset().top;height < theH && (height = theH);});var boxHeight = jq(window).height() - height - 15;return { width: width, height: boxHeight >= 960 ? 960 : boxHeight };},imgSize: { width: 1280, height: 960 },}, windowStyle);window["NEGZoomer" + i] = zoomer;zoomer.start();}if (!window._zoomer_noBindMouseOver) {window._zoomer_noBindMouseOver = true;jq("span[imgzoompic]>img").mouseover(function () {setTimeout(function () {var n = jQuery("span[imgzoompic]>img").nextAll();if (n.length > 0 && !sent52) {sent52 = true;Biz.Common.SiteCatalyst.send({ 'events': 'event52' });}}, 200);});}});},displayMirLink: function () {if (jQuery("#mirContent").length > 0 && String.isNullOrEmpty(jQuery("#mirContent").html().trim())) {Web.UI.Control.setAttribute(jQuery('#mirContent')[0], { "style.display": "none" });} else {Web.UI.Control.setAttribute(jQuery('#mirContent')[0], { "style.display": "" });}if (jQuery("#specialLinkContent").length > 0 && String.isNullOrEmpty(jQuery("#specialLinkContent").html().trim())) {Web.UI.Control.setAttribute(jQuery('#specialLinkContent')[0], { "style.display": "none" });} else {Web.UI.Control.setAttribute(jQuery('#specialLinkContent')[0], { "style.display": "" });}},gotoSellerList: function (div) {var $tab = jQuery("#buying-options .tab-content .tab-nav ul li:eq(0)");$tab.click();Biz.Product.MoreBuyingOptions.scrollToMoreBuyingOption();},gotoFeedBack: function () {this.switchTab("Community_Tab");jQuery.scrollTo("#fullInfo", 800);},switchTab: function (tabName) {var wuc = Web.UI.Control;var ulNodes = $("tabSections").childNodes;var tabs = [];for (var i = 0; i < ulNodes.length; i++) {if (ulNodes[i].nodeName == "LI") {tabs.push(ulNodes[i]);};};for (var i = 0; i < tabs.length; i++) {if (tabs[i].id == tabName) {wuc.removeCss(tabs[i], "inactive"); wuc.addCss(tabs[i], "active");wuc.removeCss($(tabs[i].id.split("_")[0] + "_Content"), "inactive"); wuc.addCss($(tabs[i].id.split("_")[0] + "_Content"), "active");} else {wuc.removeCss(tabs[i], "active"); wuc.addCss(tabs[i], "inactive");wuc.removeCss($(tabs[i].id.split("_")[0] + "_Content"), "active"); wuc.addCss($(tabs[i].id.split("_")[0] + "_Content"), "inactive");};};var overviewAside = $("Overview_Aside");var detailAside = $("Details_Aside");var comboAside = jQuery(".Combo_Aside");if (tabName == "Details_Tab") {if (overviewAside) {wuc.removeCss(overviewAside, "active"); wuc.addCss(overviewAside, "inactive");};if (detailAside && comboAside.length == 0) {wuc.removeCss(detailAside, "inactive"); wuc.addCss(detailAside, "active");};} else {if (overviewAside) {wuc.removeCss(overviewAside, "inactive"); wuc.addCss(overviewAside, "active");};if (detailAside) {wuc.removeCss(detailAside, "active"); wuc.addCss(detailAside, "inactive");};};var index = jQuery("#tabSections li[class=' active']").index();jQuery("#mini-features .tab-content ul li").removeClass("is-active");jQuery("#mini-features .tab-content ul li").eq(index).addClass("is-active");},LoadProMsg: function (id, callBack, $this) {var idstr = id;if (id != null && id.indexOf('__') > -1) {idstr = id.split('__')[0];id = id.split('__')[1];}jQuery.ajax({url: Web.Config.Environment.Url.WWW + "Common/Ajax/LoadPopupInfo2016.aspx?PopupPropertyCode=" + id,processData: false,cache: false,success: function (data) {if (data != null) {jQuery("#" + idstr + "_Content").html(data);callBack($this);}}});},LoadPopup: function (o) {NEG.run(function (require) {var popup = require('Biz.Common.Popup');var $ = require("NEG.ThirdParty.jQuery");if (jQuery(o).length > 0) {popup(o, {icon: "info",dataProcess: function ($this, show) {var id = $this.attr('id');var title = $this.text().trim();$('#def_colorPopup_Title').text(title);Biz.Product.Product2016.LoadProMsg(id, show, $this);}});}});}};usingNamespace("Biz.Product")["DetailPage"] = {swapProductImageWithLoadding2011: function (img, href, itemNumber, zoomPic) {if (itemNumber == null || typeof (itemNumber) == "undefined") {itemNumber = "";};var hasWindow = window ? true : false;var isRetina = hasWindow ? window.devicePixelRatio > 1 : false;$('mainSlide_0' + itemNumber).src = img + (isRetina ? ((img.indexOf("?") > -1 ? "&" : "?") + "ex=2") : "");jQuery('#mainSlides' + itemNumber).attr('onclick', href);jQuery('#mainSlide' + itemNumber).attr("imgZoomPic", zoomPic);Web.UI.Control.addCss($('mainSlide' + itemNumber), "loading");if (jQuery('#pclaImageArea_' + itemNumber).length > 0) {jQuery("#pclaImageArea_" + itemNumber + " a[name='gallery']").attr('onclick', href);} else {jQuery("#A2").attr('onclick', href);}},clickDSComboCheckBox: function (o) {if (o.checked) {if (Newegg$("driveSaverRadioValueCheck")) {if (o.value) {Newegg$("driveSaverRadioValueCheck").value = o.value;};};}else {if (Newegg$("driveSaverRadioValueCheck")) {Newegg$("driveSaverRadioValueCheck").value = "";}}},clickMSComboCheckBox: function (o) {if (o.checked) {if (Newegg$("manufacturerServiceRadioValueCheck")) {if (o.value) {Newegg$("manufacturerServiceRadioValueCheck").value = o.value;};};}else {if (Newegg$("manufacturerServiceRadioValueCheck")) {Newegg$("manufacturerServiceRadioValueCheck").value = "";}}},clickSnetComboCheckBox: function (o, comboId) {if (o.checked) {if (Newegg$("snetRadioValueCheck")) {if (o.value) {if (comboId != "-1") {Newegg$("snetRadioValueCheck").value = o.value + "_" + comboId;} else {Newegg$("snetRadioValueCheck").value = o.value;};};};} else {if (Newegg$("snetRadioValueCheck") && Newegg$("preSelectItem")) {if (!String.isNullOrEmpty(Newegg$("preSelectItem").value) && "CHECK_" + (Newegg$("preSelectItem").value) == o.id) {o.checked = true;} else {Newegg$("snetRadioValueCheck").value = "";}}else if (Newegg$("snetRadioValueCheck")) {Newegg$("snetRadioValueCheck").value = "";};};},clickInstallNetComboCheckBox: function (o, comboId) {if (o.checked) {if (Newegg$("installNetRadioValueCheck")) {if (o.value) {if (comboId != "-1") {Newegg$("installNetRadioValueCheck").value = o.value + "_" + comboId;} else {Newegg$("installNetRadioValueCheck").value = o.value;};};};} else {if (Newegg$("installNetRadioValueCheck") && Newegg$("preSelectItem")) {if (!String.isNullOrEmpty(Newegg$("preSelectItem").value) && "CHECK_" + (Newegg$("preSelectItem").value) == o.id) {o.checked = true;} else {Newegg$("installNetRadioValueCheck").value = "";}} else if (Newegg$("installNetRadioValueCheck")) {Newegg$("installNetRadioValueCheck").value = "";};};},clickTechSupportComboCheckBox: function (o, comboId) {if (o.checked) {if (Newegg$("techSupportRadioValueCheck")) {if (o.value) {if (comboId != "-1") {Newegg$("techSupportRadioValueCheck").value = o.value + "_" + comboId;} else {Newegg$("techSupportRadioValueCheck").value = o.value;};};};} else {if (Newegg$("techSupportRadioValueCheck") && Newegg$("preSelectItem")) {if (!String.isNullOrEmpty(Newegg$("preSelectItem").value) && "CHECK_" + (Newegg$("preSelectItem").value) == o.id) {o.checked = true;} else {Newegg$("techSupportRadioValueCheck").value = "";}} else if (Newegg$("techSupportRadioValueCheck")) {Newegg$("techSupportRadioValueCheck").value = "";};};},clickSquareTradeCheckBox: function (st, comboId) {var stValues = jQuery("input#squareTradeRadioValueCheck");if (st.checked) {if (stValues && !String.isNullOrEmpty(st.value)) {jQuery.each(jQuery(st).parent().parent().find("[name='st-extend']"), function (index, item) {jQuery(item).prop("checked", false);});jQuery(st).prop("checked", true);stValues.val(st.value + (comboId !== "-1" ? "_" + comboId : ""));}} else {var preSelectItem = jQuery("input#preSelectItem");if (stValues && preSelectItem) {var ComboItem = preSelectItem.val();var preSelectedItemChecked = true;jQuery.each(jQuery(st).parent().parent().find("[name='st-extend']"), function (index, item) {if (jQuery(item).prop("checked")) {return preSelectedItemChecked = false;}});if (!String.isNullOrEmpty(ComboItem)) {if (preSelectedItemChecked) {var preSelected = ComboItem.split('_')[0];jQuery("input[id='CHECK_" + preSelected + "']").prop("checked", true);}}else {stValues.val("");}} else if (stValues) {stValues.val("");}}},getInstallNetCheckValue: function () {var sb = "";if (Newegg$("installNetRadioValueCheck")) {sb = Newegg$("installNetRadioValueCheck").value;};return sb;},getTechSupportCheckValue: function () {var sb = "";if (Newegg$("techSupportRadioValueCheck")) {sb = Newegg$("techSupportRadioValueCheck").value;};return sb;},getManufacturerServiceCheckValue: function () {var sb = "";if (Newegg$("manufacturerServiceRadioValueCheck") && Newegg$("manufacturerServiceRadioValueCheck").value) {sb = Newegg$("manufacturerServiceRadioValueCheck").value;}return sb;},getSnetCheckValue: function (mItem) {var sb = "";if (Newegg$("snetRadioValueCheck")) {if (Newegg$("snetRadioValueCheck").value) {sb = Newegg$("snetRadioValueCheck").value + "_" + mItem;};};return sb;},getDriveSaverCheckValue: function (mItem) {var sb = "";if (Newegg$("driveSaverRadioValueCheck") && Newegg$("driveSaverRadioValueCheck").value) {sb = Newegg$("driveSaverRadioValueCheck").value + "_" + mItem;}return sb;},getSquareTradeSelectedValue: function (mItem) {var sb = "";if (Newegg$("squareTradeRadioValueCheck")) {if (Newegg$("squareTradeRadioValueCheck").value.length > 2) {sb = Newegg$("squareTradeRadioValueCheck").value + "_" + mItem;};};return sb;},formatMoney: function (price) {if (price == null || price == "" || price == undefined) {return "0";};var re = /(-?\d+)(\d{3})/;while (re.test(price)) {price = ("" + price).replace(re, "$1,$2");};if ((price + "").indexOf(".") < 0) {price += ".00";};if ((price + "").indexOf(".") + 2 == (price + "").length) {price += "0";}return price + '';}};NEG.Module("Biz.Product.StepperButton", function (require) {var $ = require("NEG.ThirdParty.JQuery");function init(container) {var plus = ".qty-box .fa-plus";var minus = ".qty-box .fa-minus";if (container) {plus = container + " " + plus;minus = container + " " + minus;}$(plus).click(function () {var qty = parseInt($(this).siblings("input").val());qty = qty ? qty + 1 : 1;qty = qty > 999 ? 999 : qty;$(this).siblings("input").val(qty);});$(minus).click(function () {var qty = parseInt($(this).siblings("input").val());qty = qty ? qty - 1 : 1;qty = qty < 1 ? 1 : qty;$(this).siblings("input").val(qty);});}return { init: init };});NEG.Module("Biz.Product.BestSeller", function (require) {function init() {jQuery('.sellers-list-item').mouseover(function (e) {var popover_height = -jQuery(this).find('.popover').height() / 2 + 6;jQuery(this).find('.popover').css('top', popover_height).show();});jQuery('.sellers-list-item').mouseleave(function (e) {jQuery(this).find('.popover').hide();});}return { init: init };});NEG.Module("Biz.Product.VolumeDiscount", function (require) {var $ = require("NEG.ThirdParty.JQuery");var storage = require('Biz.Storage');function init() {$('.grpPrimary .priceTable thead').live('click', function () {var $self = $(this);$self.find('.fa-caret-down').toggleClass('fa-caret-up');$self.siblings('tbody').toggle('fast');var s = storage.getItem("VolumeDissountCollapsibleState");storage.setItem("VolumeDissountCollapsibleState", s === "collapse" ? "expand" : "collapse");});var s = storage.getItem("VolumeDissountCollapsibleState");if (s === "collapse") {var $self = $('.priceTable thead');$self.find('.fa-caret-down').toggleClass('fa-caret-up');$self.siblings('tbody').hide();} else {storage.setItem("VolumeDissountCollapsibleState", "expand");}}return { init: init };});usingNamespace("Biz.Product")["AskSeller"] = {defaultEmailAddress: null,emailValue: null,questionValue: null,isEmailOk: false,isQuestionOk: false,SetDefaultEmailAddress: function (val) {if (Biz.Product.AskSeller.defaultEmailAddress == null) {Biz.Product.AskSeller.defaultEmailAddress = val;}},ClearTempData: function () {this.emailValue = null, this.questionValue = null; this.isEmailOk = false; this.isQuestionOk = false;},Submit: function (formId) {if (!Biz.Product.AskSeller.isEmailOk || !Biz.Product.AskSeller.isQuestionOk) {Biz.Product.AskSeller.ChangeEmailBlurEvent();Biz.Product.AskSeller.ChangeQuestionBlurEvent();return;}jQuery("#modal1").find('.askSellerClassForm').submit();Biz.Product.AskSeller.ClearTempData();NEG.trigger("AskSellerPopup_Close");},EmailElement: null,QuestionElement: null,BuildEmailAndQuestionElement: function () {Biz.Product.AskSeller.EmailElement = jQuery("#modal1").find('.askSellerClassForm').find('ul').children('#li-email');Biz.Product.AskSeller.QuestionElement = jQuery("#modal1").find('.askSellerClassForm').find('ul').children('#li-question');},InitView: function () {Biz.Product.AskSeller.BuildEmailAndQuestionElement();var emailElement = Biz.Product.AskSeller.EmailElement.find('input');var questionElement = Biz.Product.AskSeller.QuestionElement.find('textarea');if (Biz.Product.AskSeller.defaultEmailAddress == null) {emailElement.val(Biz.Product.AskSeller.emailValue);} else {emailElement.val(Biz.Product.AskSeller.defaultEmailAddress);emailElement.attr("readonly", "readonly");Biz.Product.AskSeller.isEmailOk = true;}if (Biz.Product.AskSeller.questionValue != null) {questionElement.text(Biz.Product.AskSeller.questionValue);}emailElement.blur(Biz.Product.AskSeller.ChangeEmailBlurEvent);emailElement.keyup(Biz.Product.AskSeller.EmailTextChange);questionElement.blur(Biz.Product.AskSeller.ChangeQuestionBlurEvent);questionElement.keyup(Biz.Product.AskSeller.QuestionTextChange);questionElement.bind("keyup", Biz.Product.AskSeller.OnInputMessageContent);},ChangeEmailBlurEvent: function () {if (Biz.Product.AskSeller.EmailElement.find('input').val().length == 0) {Biz.Product.AskSeller.EmailElement.children("#email-error-valid").attr("style", "display:none");Biz.Product.AskSeller.EmailElement.children("#email-error-required").attr("style", "");Biz.Product.AskSeller.EmailElement.children("#email").attr("class", "error");Biz.Product.AskSeller.isEmailOk = false;}else if (!Biz.Common.Validation.isEmail(Biz.Product.AskSeller.EmailElement.find('input').val())) {Biz.Product.AskSeller.EmailElement.children("#email-error-required").attr("style", "display:none");Biz.Product.AskSeller.EmailElement.children("#email-error-valid").attr("style", "");Biz.Product.AskSeller.EmailElement.children("#email").attr("class", "error");Biz.Product.AskSeller.isEmailOk = false;}else {Biz.Product.AskSeller.EmailElement.children("#email-error-valid").attr("style", "display:none");Biz.Product.AskSeller.EmailElement.children("#email-error-required").attr("style", "display:none");Biz.Product.AskSeller.EmailElement.children("#email").attr("class", "valid");Biz.Product.AskSeller.emailValue = this.value;Biz.Product.AskSeller.isEmailOk = true;}},ChangeQuestionBlurEvent: function () {var Pattern = new RegExp(/^\s*$/g);if (Biz.Product.AskSeller.QuestionElement.find('textarea').val().length == 0) {Biz.Product.AskSeller.QuestionElement.children("#question-error-required").attr("style", "");Biz.Product.AskSeller.QuestionElement.children("#Question").attr("class", "error");Biz.Product.AskSeller.isQuestionOk = false;}else if (Pattern.test(Biz.Product.AskSeller.QuestionElement.find('textarea').val())) {Biz.Product.AskSeller.QuestionElement.children("#question-error-required").attr("style", "");Biz.Product.AskSeller.QuestionElement.children("#Question").attr("class", "error");Biz.Product.AskSeller.isQuestionOk = false;}else {Biz.Product.AskSeller.QuestionElement.children("#question-error-required").attr("style", "display:none");Biz.Product.AskSeller.question = this.value;Biz.Product.AskSeller.isQuestionOk = true;}},EmailTextChange: function () {Biz.Product.AskSeller.emailValue = Biz.Product.AskSeller.EmailElement.find('input').val();Biz.Product.AskSeller.EmailElement.children("#email-error-valid").attr("style", "display:none");Biz.Product.AskSeller.EmailElement.children("#email-error-required").attr("style", "display:none");Biz.Product.AskSeller.EmailElement.children("#email").attr("class", "");},QuestionTextChange: function () {Biz.Product.AskSeller.questionValue = Biz.Product.AskSeller.QuestionElement.find('textarea').val();Biz.Product.AskSeller.QuestionElement.children("#question-error-required").attr("style", "display:none");Biz.Product.AskSeller.QuestionElement.children("#Question").attr("class", "");},OnInputMessageContent: function () {var questionElement = Biz.Product.AskSeller.QuestionElement.find('textarea');if (this.value.length > 500) {questionElement.text(this.value.substring(0, 500));this.value = questionElement.text();};Biz.Product.AskSeller.QuestionElement.find("label").find("span").children("#proCount").text(this.value.length);}};usingNamespace("Biz.Product")["MoreBuyingOptions"] = {paramsCollection: [],paramCollection: [],ajaxUrl: "Common/Ajax/LoadMoreBuyingOption.aspx",isFirstCall: null,needRefresh: null,selfId: null,backgorundOverview: null,init: function () {Biz.Product.MoreBuyingOptions.groupFilter("buying-all", true, 1, false);},anchorForNewProductVersion: function (dom) {var tabName = 'buying-' + dom.toLowerCase();var $tab = jQuery("[tab-tag=" + tabName + "]");$tab.click();Biz.Product.MoreBuyingOptions.scrollToMoreBuyingOption();},scrollToMoreBuyingOption: function () {var mini = jQuery("#mini-features").height();var o = jQuery("#buying-options");if (o.length > 0) {jQuery('html, body').animate({scrollTop: o.offset().top - mini}, 1000);}},setParams: function (param, value) {var o = Biz.Product.MoreBuyingOptions;var params = {};if (param != null) {if (o.paramCollection.indexOf(param) < 0) {params.param = param;params.value = value;o.paramCollection.push(param);o.paramsCollection.push(params);} else {o.paramsCollection[o.paramCollection.indexOf(param)].value = value;}}},fixedUrl: function (arr) {var o = Biz.Product.MoreBuyingOptions;var url = o.ajaxUrl;var fixedUrl = Web.Config.Environment.Url.Content + url;if (arr.length > 0) {for (var i = 0; i < arr.length; i++) {var temp = arr[i];var params = {};params.param = temp.param;params.value = temp.value;if (fixedUrl.split("?").length > 1) {fixedUrl = fixedUrl + "&" + params.param + "=" + params.value;} else {fixedUrl = fixedUrl + "?" + params.param + "=" + params.value;}}}return fixedUrl;},query: function () {var o = Biz.Product.MoreBuyingOptions;var requestUrl = o.fixedUrl(o.paramsCollection);jQuery.ajax({url: requestUrl,cache: true,dataType: "jsonp",jsonp: "action",jsonpCallback: "Biz.Product.MoreBuyingOptions.JsonpCallBack"});},JsonpCallBack: function (data) {var o = Biz.Product.MoreBuyingOptions;var pageId = 'page-' + o.selfId;if (data) {var daArray = [];if (data.indexOf("||+||+||+||") > -1) {daArray = data.split("||+||+||+||");}if (daArray.length > 0) {var body = jQuery(daArray[0]).html();var newpv = daArray[1].trim().replace("\r\n", "");if (o.isFirstCall) {jQuery("#moreBuyingOptionLoaded").val("1");if (newpv.length > 0) {jQuery('#newproductversion').html(newpv).css('display', 'inline-block');}var fixedId = jQuery(body).find('#first-call-tab').val();var content = jQuery(body).find("[content-tag='default']").html();jQuery('#buying-options').html(body);jQuery("[content-tag='" + fixedId + "']").html(content).show();o.commonJS4FirstCall(fixedId);o.commonJS();jQuery("[content-tag='default']").remove();var productListUrlParam = o.getUrlParam('buyingoptions');if (productListUrlParam != null && productListUrlParam != "") {setTimeout(function () { o.anchorForNewProductVersion(productListUrlParam); }, 3000);}} else {var resultsDom = jQuery(body).find("[content-tag='default']").html();jQuery("[content-tag='" + o.selfId + "']").html(resultsDom);var pageDom = jQuery(body).find('#search-pagination').find('#' + pageId).html();if (o.needRefresh) {if (typeof pageDom == "undefined") {pageDom = "";jQuery('#' + pageId).html(pageDom).hide();} else {jQuery('#' + pageId).html(pageDom).show();o.registerPagination(o.selfId);}}o.commonJS();setTimeout(function () { o.backgorundOverview.remove(); }, 350);}NEG.run(function (require) {require("Biz.Product.StepperButton").init("#buying-options");});} else {jQuery('#newproductversion').hide();}} else {jQuery('#newproductversion').hide();}},getUrlParam: function (name) {var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");var r = window.location.search.substr(1).match(reg);if (r != null) return unescape(r[2]); return null;},registerSortBy: function () {jQuery('#buying-options .form-select').delegate('select', 'change', function () {var $self = jQuery(this);var newSelection = $self.children("option").filter(":selected").text();$self.siblings(".form-select-name").text(newSelection);var $parent = $self.parents("[id*='buying']").first();var id = jQuery($parent).attr("id");Biz.Product.MoreBuyingOptions.groupFilter(id, false, 1, true);});},registerSwitchTab: function () {jQuery('#buying-options .tab-nav ul').children('li').click(function () {var $self = jQuery(this);var id = $self.attr('tab-tag');$self.parent().children('li').removeClass('is-active');$self.addClass('is-active').index();jQuery('#' + id).show().siblings().hide();var searchResults = jQuery("[content-tag='" + id + "']").html();if (searchResults.length == 0) {Biz.Product.MoreBuyingOptions.groupFilter(id, false, 1, true);}jQuery("[content-tag='" + id + "']").show().siblings().hide();if (jQuery('#page-' + id).length > 0 && jQuery('#page-' + id).html().length > 0) {jQuery('#page-' + id).show().siblings("[id*='page-buying-']").hide();} else {jQuery(".footer-pagination").hide();}});},registerFilterBy: function () {jQuery('#buying-options').find('input[type=checkbox]').each(function () {var $self = jQuery(this);$self.click(function () {var $this = jQuery(this);var $parent = $this.parents('.custom-filter');var id = jQuery($parent).attr("id");Biz.Product.MoreBuyingOptions.groupFilter(id, false, 1, true);});});},registerPagination: function (id) {var disable = "disabled";var current = "is-current";jQuery('#page-' + id).find('.btn-group-cell').each(function () {var $self = jQuery(this);$self.click(function () {var arrow = "";var isPrev = false;var isNext = false;var $this = jQuery(this);var $parent = $this.parents('.footer-pagination');var fullId = $parent.attr('id');var internalId = fullId.substring(5);var pageCount = jQuery("[content-tag='" + internalId + "']").find('.cur-page-count').val();var prevBtn = $parent.find('.fa.fa-caret-left').parent();var nextBtn = $parent.find('.fa.fa-caret-right').parent();var status = $this.find('button').attr('disabled');var fixedIndex = $this.find('button').attr('btn-index');var curBtn = $parent.find("[btn-index='" + fixedIndex + "']");var isCurBtn = $parent.find('.btn.is-current');var midBtn = $parent.find("[btn-index=5]");var allBtn = $parent.find('[btn-index]');var curNum = isCurBtn.text();var curIndex = isCurBtn.attr('btn-index');var num = $this.find('button').text();var midNum = midBtn.text();fixedIndex = parseInt(fixedIndex);num = parseInt(num);curNum = parseInt(curNum);curIndex = parseInt(curIndex);midNum = parseInt(midNum);pageCount = parseInt(pageCount);if (status == disable) {return;}if (num == curNum) {return;}var deactivateNext = function () {prevBtn.removeAttr(disable);nextBtn.attr(disable, disable);};var deactivatePrev = function () {nextBtn.removeAttr(disable);prevBtn.attr(disable, disable);};var activatBoth = function () {prevBtn.removeAttr(disable);nextBtn.removeAttr(disable);};var style4Cur = function () {curBtn.addClass(current);allBtn.not(curBtn).removeClass(current);};var style4Mid = function () {midBtn.addClass(current);allBtn.not(midBtn).removeClass(current);};var style4Modify = function (fixed) {var fixedBtn = $parent.find("[btn-index='" + (fixedIndex + fixed) + "']");fixedBtn.addClass(current);allBtn.not(fixedBtn).removeClass(current);};var refresh4Cur = function (dValue) {for (var i = 0; i < allBtn.length; i++) {var tmp = jQuery(allBtn[i]).text();jQuery(allBtn[i]).text(parseInt(tmp) + dValue);}};if ($this.find('i').length > 0) {arrow = $this.find('i').attr('class');isPrev = arrow == "fa fa-caret-left";isNext = arrow == "fa fa-caret-right";}if (isPrev) {Biz.Product.MoreBuyingOptions.pagination((curIndex - 1), fullId);} else if (isNext) {Biz.Product.MoreBuyingOptions.pagination((curIndex + 1), fullId);}if (!isPrev && !isNext) {if (pageCount > 9) {if (fixedIndex >= 6) {var maxDValue = num - midNum;var tail = 9 - fixedIndex;var available = pageCount - num - tail;if (available > maxDValue) {refresh4Cur(maxDValue);style4Mid();} else if (available > 0 && available <= maxDValue) {refresh4Cur(available);style4Modify(-available);} else {style4Cur();}} else if (fixedIndex == 5) {style4Mid();} else if (fixedIndex <= 4) {var maxDValue1 = -(num - midNum);var available1 = num - fixedIndex;if (available1 > maxDValue1) {refresh4Cur(-maxDValue1);style4Mid();} else if (available1 > 0 && available1 <= maxDValue1) {refresh4Cur(-available1);style4Modify(available1);} else {style4Cur();}}} else {style4Cur();}if (parseInt($parent.find('.btn.is-current').text()) == 1) {deactivatePrev();} else if (parseInt($parent.find('.btn.is-current').text()) == pageCount) {deactivateNext();} else {activatBoth();}Biz.Product.MoreBuyingOptions.groupFilter(internalId, false, num, false);}});});},pagination: function (index, id) {if (typeof index == "number" && typeof id != "undefined") {var $self = jQuery('#' + id).find('.btn-group-cell').eq(index);$self.click();}},groupFilter: function (id, isFirstCall, pageNumber, needRefresh) {var o = Biz.Product.MoreBuyingOptions;var parentItem = jQuery('#mboParentItemNumber').val();var mappingId = jQuery('#mboMappingId').val();o.setParams("ParentItem", parentItem);o.setParams("MappingId", mappingId);o.setParams("FirstCall", isFirstCall);o.setParams("PageNum", pageNumber);var tabType = 0;if (jQuery("[tab-tag='" + id + "']").find("input[type='hidden']").length > 0) {tabType = jQuery("[tab-tag='" + id + "']").find("input[type='hidden']").val();}o.setParams("TabType", tabType);var nValue = [];var temp = jQuery('#' + id).find('input[type=checkbox]:checked');if (temp.length > 0) {for (var i = 0; i < temp.length; i++) {var j = jQuery(temp[i]).val();nValue.push(j);}}o.setParams("FilterBy", nValue.toString());var sortBy = 0;if (jQuery('#' + id).find('option:selected').length > 0) {sortBy = jQuery('#' + id).find('option:selected').val();}o.setParams("SortBy", sortBy);o.isFirstCall = isFirstCall;o.selfId = id;o.needRefresh = needRefresh;if (jQuery('#buying-options').length > 0) {if (!isFirstCall) {var dataOverlayElement = jQuery("#buying-options .tab-pane");o.backgorundOverview = jQuery("<div id='mask4MoreBuyOption' style='background:rgb(100,100,100);opacity:.6;filter:alpha(opacity=60);text-align: center;margin: 0 auto;'></div>").css({top: 0,left: 0,zIndex: "15",position: "absolute",width: "100%",height: "100%"});var loadingImagePath = Web.UI.ResourceManager.Image.build("loading32.gif");var loader = jQuery('<div style="vertical-align: middle;position: absolute;color:#fff;"><img src="' + loadingImagePath + '" /><span style="float:right;height:32px;line-height:32px">Loading...</span></div>').css({ top: "80px", left: dataOverlayElement.innerWidth() / 2 - 32 });o.backgorundOverview.append(loader);o.backgorundOverview.insertAfter(dataOverlayElement);o.query();} else {if (jQuery("#moreBuyingOptionLoaded").val() == "0") {o.query();}}}},commonJS4FirstCall: function (id) {var tabCounts = jQuery('.buying-options-filter').children().length;if (tabCounts == 1) {var $singleTab = jQuery('.buying-options-filter').children();$singleTab.attr('style', 'display:block');}Biz.Product.MoreBuyingOptions.registerSortBy();Biz.Product.MoreBuyingOptions.registerSwitchTab();Biz.Product.MoreBuyingOptions.registerFilterBy();Biz.Product.MoreBuyingOptions.registerPagination(id);},commonJS: function () {NEG.run(function (require) {var popup = require('Biz.Common.Popup');if (jQuery('.membership-popup').length > 0) {popup('.membership-popup', {header: false});}if (jQuery('.cellphoneSecure-popup').length > 0) {popup('.cellphoneSecure-popup', {icon: "info"});}if (jQuery('.condition-popup').length > 0) {popup('.condition-popup', {custom: true});}if (jQuery('.AskSeller-popup').length > 0) {var popupInstance = popup('.AskSeller-popup', {icon: "info",beforeShow: function ($content, $this) {var content = $this.siblings("div[data-neg-temp='AskSellerPopup_content']");return $content.html(content.html());},afterShow: function ($content, $this) {prepareAskSellerCaptcha($this.attr('data-contentid'));Biz.Product.AskSeller.InitView();}});NEG.on("AskSellerPopup_Close", function () {popupInstance.close();});}});}};usingNamespace("Biz.Product")["AddToCart"] = {itemList: "",preItemList: "",subscriptionItemList: "",optionItemList: "",EWTList: "",mainItemQty: "",autoNotify: function (vItem) {var wces = Web.Config.Environment.SSLPage;var notifyUrl = wces.NewMyAccountAutoNotify + "?Submit=ADD&Item=" + vItem;if (window.opener && !window.opener.closed) {window.opener.location.href = notifyUrl;} else {window.open(notifyUrl, '_self');};window.close();},add: function(vItem, vOrderType, closeWindow, checkUpService, checkUpMoreBuyOption, isAITItem, isDigitalSubscribe) {NEG.run(function(require) {var jQuery = require("NEG.ThirdParty.jQuery");var wces = Web.Config.Environment.SSLPage;var addToCartUrl = wces.AddTocart;var tmpMainItemQty = "";var tmpIsAITItem = typeof isAITItem == "undefined" ? 0 : isAITItem;var tmpIsDigitalSubscribe = false;if (!(typeof isDigitalSubscribe == "undefined")) {if (isDigitalSubscribe == 1) {tmpIsDigitalSubscribe = true;}}if (checkUpMoreBuyOption) {tmpMainItemQty = jQuery("#MBO_qtyMainItems" + vItem + "").val();if (vOrderType == 1) {if (tmpIsDigitalSubscribe) {Biz.Product.AddToCart.subscriptionItemList = vItem + "|" + 1;} else {Biz.Product.AddToCart.itemList = vItem + "|" + tmpMainItemQty;}} else {Biz.Product.AddToCart.preItemList = vItem + "|" + tmpMainItemQty;}};var elems = Web.UI.Form.getElements("bcaFromProductDetail");if (elems != null) {for (var i = 0; i < elems.length; i++) {if (elems[i].type == "radio" || elems[i].type == "checkbox") {elems[i].checked = false;};};}jQuery("#ItemList").val(Biz.Product.AddToCart.itemList);jQuery("#PreItemList").val(Biz.Product.AddToCart.preItemList);jQuery("#SubscriptionItemList").val(Biz.Product.AddToCart.subscriptionItemList);jQuery("#OptionItemList").val(Biz.Product.AddToCart.optionItemList);jQuery("#EWTList").val(Biz.Product.AddToCart.EWTList);jQuery("#isAitItem").val(tmpIsAITItem);jQuery("#IsRegularPrice").val("");var action = addToCartUrl + "?submit=ADD";jQuery("#bcaFromProductDetail").attr('action', action);if (Biz.Product.video.getCookie() == "1") {setTimeout(function() {Web.UI.Form.submit("bcaFromProductDetail");}, 200);} else {Web.UI.Form.submit("bcaFromProductDetail");};if (closeWindow == 1) {var wces = Web.Config.Environment.SSLPage;var cartUrl = wces.AddTocart;if (vOrderType === "2") {cartUrl += "?Submit=ADD&PreItemList=" + vItem + "|1";} else {cartUrl += "?Submit=ADD&ItemList=" + vItem + "|1";}var isRegularUrl = location.href.search(/regularpurchase/i);if (isRegularUrl != -1) {cartUrl += "&isRegularPrice=1";}if (window.opener && window.opener.location.href.toLowerCase().indexOf("product.aspx") < 0) {window.opener.location.href = cartUrl;} else {Web.UI.Control.openWindow(cartUrl, "_blank", 800, 720, 0, 0, "menubar=yes,scrollbars=yes,toolbar=yes,resizable=yes,status=yes");}window.close();}});},addCombo: function (comboItem, itemNumber, qty) {var wces = Web.Config.Environment.SSLPage;var addToCartUrl = wces.AddTocart;addToCartUrl += "?submit=ADD&ItemList=";var comboParam = "Combo.";if (typeof comboItem !== 'undefined') {comboParam += comboItem;}if (typeof itemNumber !== 'undefined' && itemNumber != "") {comboParam += '.' + itemNumber;}addToCartUrl += comboParam;if (Biz.Product.video.getCookie() == "1") {setTimeout(function () { window.location.href = addToCartUrl; }, 200);}else {window.location.href = addToCartUrl;};},getserviceGroupParameter: function(Item) {tmpInstallNet = Biz.Product.DetailPage.getInstallNetCheckValue();tmpSNETResult = Biz.Product.DetailPage.getSnetCheckValue(Item);tmpTechSupport = Biz.Product.DetailPage.getTechSupportCheckValue();tmpDriveSaver = Biz.Product.DetailPage.getDriveSaverCheckValue(Item);tmpManufacturer = Biz.Product.DetailPage.getManufacturerServiceCheckValue();tmpSquareTrade = Biz.Product.DetailPage.getSquareTradeSelectedValue(Item);if (!tmpDriveSaver) {tmpDriveSaver = "";}var stExtend = document.querySelectorAll('li#stExtend');var needlessSTItem = document.querySelector("input#squareTradeNeedless");if (stExtend.length > 0 && String.isNullOrEmpty(tmpSquareTrade) && needlessSTItem.value === "0") {needlessSTItem && (needlessSTItem.btnPosition = "top");document.querySelector("button#btn_addToCartPopup") && document.querySelector("button#btn_addToCartPopup").click();window.document.body.attachEvent("onclick", (function() {var o = window.event.srcElement;if (o && o.id === "" && o.className === "" && o.tagName === "DIV") {Biz.Product.WarrantyTabService.buyAdditionalServiceItem(Item);}}));return false;}var hasInetCombo = tmpInstallNet.split("_").length == 2;var hasSnetCombo = tmpSNETResult.split("_").length == 3;var hasSTCombo = tmpSquareTrade.split("_").length === 3;var hasTsCombo = tmpTechSupport.split("_").length == 2;var inComboValue, snetComboValue, stComboValue, tsComboValue = "";if (hasInetCombo) {inComboValue = "Combo." + tmpInstallNet.split("_")[1];};if (hasSnetCombo) {snetComboValue = "Combo." + tmpSNETResult.split("_")[1];tmpSNETResult = tmpSNETResult.replace(tmpSNETResult.split("_")[2], snetComboValue);};if (hasSTCombo) {var stValues = tmpSquareTrade.split("_");stComboValue = "Combo." + stValues[1];tmpSquareTrade = tmpSquareTrade.replace(stValues[2], stComboValue);};if (hasTsCombo) {tsComboValue = "Combo." + tmpTechSupport.split("_")[1];};var ewtListValue = "";if (!String.isNullOrEmpty(tmpSNETResult)) {ewtListValue += tmpSNETResult;}if (!String.isNullOrEmpty(tmpSquareTrade)) {ewtListValue += tmpSquareTrade;}if (!String.isNullOrEmpty(tmpDriveSaver)) {ewtListValue += "," + tmpDriveSaver;}if (ewtListValue.substr(0, 1) === ",") {ewtListValue = ewtListValue.substr(1);}var items = [];if (!String.isNullOrEmpty(tmpTechSupport) && hasTsCombo === false) {items.push(tmpTechSupport);}if (!String.isNullOrEmpty(tmpInstallNet) && hasInetCombo === false) {items.push(tmpInstallNet);}if (!String.isNullOrEmpty(tmpManufacturer)) {items.push(tmpManufacturer);}var comboItems = [];if (hasInetCombo) {comboItems.push(inComboValue);}if (hasSnetCombo) {comboItems.push(snetComboValue);}if (hasSTCombo) {comboItems.push(stComboValue);}if (hasTsCombo) {comboItems.push(tsComboValue);}return {items: items,comboItems: comboItems,ewtListValue: ewtListValue};}};usingNamespace("Biz.Product")["Item"] = {add: function (link) {if (Biz.Product.video.getCookie() == "1") {setTimeout(function () { window.location.href = link; }, 200);}else {window.location.href = link;};},mappingPriceAdd: function (link, closeWindow) {if (closeWindow == 1) {if (window.opener && window.opener.location.href.toLowerCase().indexOf("product.aspx") < 0) {window.opener.location.href = link;} else {Web.UI.Control.openWindow(link, "_blank", 800, 720, 0, 0, "menubar=yes,scrollbars=yes,toolbar=yes,resizable=yes,status=yes");}window.close();}window.location.href = link;},moreBuyOptionAdd: function () {if (Biz.Product.video.getCookie() == "1") {setTimeout(function () { window.location.href = link; }, 200);}else {window.location.href = link;};}};usingNamespace("Biz.Product")["TabCustomerQA"] = {init: function (itemNumber) {NEG.run(function (require) {var resourceManager = require("Biz.UI.ResourceManager");var loadingImagePath = resourceManager.Image.build("loading16.gif");var loader = jQuery('<div class="loader" style="text-align:center"><img src="' + loadingImagePath + '" style="vertical-align:middle;" />Loading...</div>');jQuery.ajax({processData: false,url: Web.Config.Environment.Url.WWW + "Common/Ajax/TabCustomerQA2016.aspx?Item=" + itemNumber,success: function (data) {if (data !== "" && !(typeof (TurnToItemData) == 'undefined' || typeof (TurnToItemData.counts) == 'undefined')) {jQuery("#Customer-QA_Tab")[0].setAttribute("style", "display:block");jQuery("#mini-features-Customer-QA")[0].setAttribute("style", "display:block");var temp = jQuery('div.TT3ugc');temp.html(data);};},beforeSend: function () {jQuery("#QATabLoading").append(loader);},complete: function () {jQuery("#QATabLoading").children().remove();}});});}};usingNamespace("Biz.Common")["ReCaptchaManager"] = (function (sitekey) {var captchaManager = {currentId: 0};var captchaMap = {};var has = function (captchaId) {return captchaMap.hasOwnProperty(captchaId);};var add = function (captchaId, onInit, onReset, onResponse) {captchaManager.currentId = captchaId;captchaMap[captchaId] = {};captchaMap[captchaId].onInit = onInit;captchaMap[captchaId].onReset = onReset;captchaMap[captchaId].onResponse = onResponse;};captchaManager.createWidget = function (captchaId) {captchaMap[captchaId].widgetId = grecaptcha.render(captchaId, {'sitekey': sitekey,'callback': captchaMap[captchaId].onResponse,'expired-callback': function () {grecaptcha.reset(captchaMap[captchaId].widgetId);captchaMap[captchaId].onReset();}});if (!!captchaMap[captchaId].onInit) {captchaMap[captchaId].onInit();}};captchaManager.createCaptcha = function (captchaId, onInit, onReset, onResponse) {if (has(captchaId)) {onInit(captchaId);return;}add(captchaId, onInit, onReset, onResponse);if (!!window.grecaptcha) {this.createWidget(captchaId);return;}var grc = document.createElement('script');grc.type = 'text/javascript';grc.src = 'https://www.google.com/recaptcha/api.js?onload=captchaJSCallback&render=explicit';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(grc);};return captchaManager;})(window.Web.Config.recaptchaKey);function captchaJSCallback() {var captchaManager = Biz.Common.ReCaptchaManager;captchaManager.createWidget(captchaManager.currentId);}function AskSellerCaptcha(contentId) {var clear = function () {jQuery('#' + this.id).remove();};var disableSubmit = function () {console.log('disable submit of ' + contentId);var askSellerSubmit = jQuery('#modal1 #ask-seller-submit-' + contentId);askSellerSubmit.css('cursor', 'default');askSellerSubmit.css('color', 'gray');askSellerSubmit.unbind('click');};var callback = function (response) {jQuery('#modal1 #recaptchaResponse' + contentId).val(response);var askSellerSubmit = jQuery('#modal1 #ask-seller-submit-' + contentId);askSellerSubmit.css('cursor', 'pointer');askSellerSubmit.css('color', '#222');askSellerSubmit.bind('click', function () {Biz.Product.AskSeller.Submit('askSellerIdForm_' + contentId);});};this.id = 'g-recaptcha-' + (new Date()).getTime();this.show = function () {clear();jQuery('#modal1 #li-anti-spam-' + contentId).append('<div id="' + this.id + '"></div>');Biz.Common.ReCaptchaManager.createCaptcha(this.id, disableSubmit, disableSubmit, callback);};}function prepareAskSellerCaptcha(contentId) {var captcha = new AskSellerCaptcha(contentId);captcha.show();}usingNamespace("Biz.Product")["WarrantyTabService"] = {processDomReady: function () {NEG.run(function (require) {var jQuery = require("NEG.ThirdParty.jQuery");jQuery(".rn-warrantyForm-bottom .plus").hide();jQuery(".rn-warrantyForm-bottom .opt:gt(0)").hide();jQuery(".rn-warrantyForm-bottom").hide();});},switchNoItem: function (a) {NEG.run(function (require) {var jQuery = require("NEG.ThirdParty.jQuery");jQuery(a).parents(".rn-warrantyForm-table").find("input[id^='rr']").attr('checked', false);var serviceType = jQuery(a).parent().parent().siblings().find('input').attr('name');switch (serviceType) {case "SNET":if (!jQuery("input[name='SNET']").is(':checked')) {jQuery("span[class^='plus SNET']").hide();jQuery("span[class^='opt SNET']").hide();}break;case "InstallerNet":if (!jQuery("input[name='InstallerNet']").is(':checked')) {jQuery(".rn-warrantyForm-bottom .plus.InstallerNet").hide();jQuery(".rn-warrantyForm-bottom .opt.InstallerNet").hide();}break;case "TechSupport":if (!jQuery("input[name='TechSupport']").is(':checked')) {jQuery(".rn-warrantyForm-bottom .plus.TechSupport").hide();jQuery(".rn-warrantyForm-bottom .opt.TechSupport").hide();}break;case "DriveSaver":if (!jQuery("input[name='DriveSaver']").is(':checked')) {jQuery(".rn-warrantyForm-bottom .plus.DriveSaver").hide();jQuery(".rn-warrantyForm-bottom .opt.DriveSaver").hide();}break;case "Manufacturer":if (!jQuery("input[name='Manufacturer']").is(':checked')) {jQuery("span[class^='plus Manufacturer']").hide();jQuery("span[class^='opt Manufacturer']").hide();}break;}Biz.Product.WarrantyTabService.calTotalSelectedPrice();if (jQuery("input[id^=rr]").is(':checked')) {jQuery(".rn-warrantyForm-bottom").show();} else {jQuery(".rn-warrantyForm-bottom").hide();}});},switchItem: function (a) {NEG.run(function (require) {var jQuery = require("NEG.ThirdParty.jQuery");var findInput = jQuery(a).parent().parent().find("input");var serviceType = findInput.attr('name');var groupOrder = findInput.attr('rel');jQuery(".rn-warrantyForm-bottom").show();if (findInput.is(':checked')) {switch (serviceType) {case "SNET":var tempSnetPlusQuery = ".rn-warrantyForm-bottom .plus.SNET" + "_" + groupOrder;var tempSnetOptQuery = ".rn-warrantyForm-bottom .opt.SNET" + "_" + groupOrder;jQuery("span[class^='plus SNET']").hide();jQuery("span[class^='opt SNET']").hide();jQuery(tempSnetPlusQuery).show();jQuery(tempSnetOptQuery).show();jQuery("input[name^='SNET_']").prop("checked", true);jQuery(a).parents(".rn-warrantyForm-table").find("input[id^='ee']").prop("checked", false);break;case "InstallerNet":jQuery(".rn-warrantyForm-bottom .plus.InstallerNet").show();jQuery(".rn-warrantyForm-bottom .opt.InstallerNet").show();jQuery("input[name^='InstallerNet_']").prop("checked", true);jQuery(a).parents(".rn-warrantyForm-table").find("input[id^='ee']").prop("checked", false);break;case "TechSupport":jQuery(".rn-warrantyForm-bottom .plus.TechSupport").show();jQuery(".rn-warrantyForm-bottom .opt.TechSupport").show();jQuery("input[name^='TechSupport_']").prop("checked", true);jQuery(a).parents(".rn-warrantyForm-table").find("input[id^='ee']").prop("checked", false);break;case "DriveSaver":jQuery(".rn-warrantyForm-bottom .plus.DriveSaver").show();jQuery(".rn-warrantyForm-bottom .opt.DriveSaver").show();jQuery("input[name^='DriveSaver_']").prop("checked", true);jQuery(a).parents(".rn-warrantyForm-table").find("input[id^='ee']").prop("checked", false);break;case "Manufacturer":var tempMsPlusQuery = ".rn-warrantyForm-bottom .plus.Manufacturer" + "_" + groupOrder;var tempMsOptQuery = ".rn-warrantyForm-bottom .opt.Manufacturer" + "_" + groupOrder;jQuery("span[class^='plus Manufacturer']").hide();jQuery("span[class^='opt Manufacturer']").hide();jQuery(tempMsPlusQuery).show();jQuery(tempMsOptQuery).show();jQuery("input[name^='Manufacturer_']").prop("checked", true);jQuery(a).parents(".rn-warrantyForm-table").find("input[id^='ee']").prop("checked", false);break;}}Biz.Product.WarrantyTabService.calTotalSelectedPrice();});},calTotalSelectedPrice: function () {NEG.run(function (require) {var jQuery = require("NEG.ThirdParty.jQuery");var totalSelectedPrice = 0;if (jQuery("#mainItemPriceBefore").length > 0) {totalSelectedPrice = eval(jQuery("#mainItemPriceBefore").val());}jQuery("input[id^=rr]").each(function () {if (jQuery(this).is(':checked')) {var servicePrice = jQuery(this).parent().parent().find('td:eq(2)').text().trim();var regExp = /\d.*\.\d{2}/;var price = servicePrice.match(regExp);totalSelectedPrice = (parseFloat(totalSelectedPrice) + parseFloat(price[0].replace(",", ""))).toFixed(2);}});Biz.Product.WarrantyTabService.displayTotalPrice(totalSelectedPrice);});},displayTotalPrice: function (totalPrice) {NEG.run(function (require) {var jQuery = require("NEG.ThirdParty.jQuery");var tmp = Biz.Product.DetailPage.formatMoney(totalPrice).split(".");var newTotalPrice = tmp[0] + "<sup>." + tmp[1] + "</sup>";var fristPrice = jQuery("input[id=rr0_1]").parent().parent().find('td:eq(2)').text().trim();var regExp = /\d.*\.\d{2}/;var pricePart = fristPrice.match(regExp);var priceTemplate = fristPrice.replace(pricePart[0], "{p}");var formatPrice = "<strong>" + priceTemplate.replace("{p}", newTotalPrice) + "</strong>";if (jQuery("#TotalSelectedPrice").attr('class').indexOf('hidden') > -1) {jQuery("#TotalSelectedPrice").html(formatPrice).hide();} else {jQuery("#TotalSelectedPrice").html(formatPrice).show();}});},addWarrantyTabServiceItems: function (mItem, isPOS) {NEG.run(function (require) {var jQuery = require("NEG.ThirdParty.jQuery");var itemList = [];var preItemList = [];var allItemList = [];var allItemNumList = [];if (!isPOS) {allItemList = Biz.Product.WarrantyTabService.getAllKindOfSelectedServiceItem(mItem);} else {allItemList = Biz.Product.WarrantyTabService.getAllKindOfSelectedServiceItem();}var count = allItemList.length;for (var i = 0; i < count; i++) {if (allItemList[i].isPreOrder === "1") {preItemList.push(allItemList[i].itemNumber);}if (allItemList[i].isPreOrder === "0") {itemList.push(allItemList[i].itemNumber);}allItemNumList.push(allItemList[i].itemNumber);}var EWTListValue = Biz.Product.WarrantyTabService.getServiceEWTListValue(allItemNumList, mItem);var stExtend = jQuery("input[name='SNET']");var needlessSTItem = jQuery("input#squareTradeNeedless");jQuery(needlessSTItem).attr("btnposition", "bottom");if (stExtend.length > 0 && jQuery("input[name='SNET']:Checked").length <= 0 && needlessSTItem.val() === "0") {jQuery(needlessSTItem).prop("btnPosition", "bottom");jQuery("button#btn_addToCartPopup").click();window.document.body.attachEvent("onclick", (function () {var o = window.event.srcElement;if (jQuery(o).prop("id") === "" && jQuery(o).prop("class") === "" && jQuery(o).is('div')) {Biz.Product.WarrantyTabService.buyAdditionalServiceItem(mItem);}}));return;}var sb = new Sys.Text.StringBuilder();var wces = Web.Config.Environment.SSLPage;sb.append(wces.AddTocart);sb.append("?Submit=ADD");if (itemList.length > 0) {sb.append("&ItemList=");sb.append(itemList.join(","));}if (preItemList.length > 0) {sb.append("&PreItemList=");sb.append(preItemList.join(","));}if (isPOS) {sb.append("&BOMItemList=" + mItem);}if (!String.isNullOrEmpty(EWTListValue)) {sb.append("&EWTList=" + EWTListValue);};if (Biz.Product.video.getCookie() == "1") {setTimeout(function () { window.location.href = sb.toString(); }, 200);}else {window.location.href = sb.toString();};});},getAllKindOfSelectedServiceItem: function (mItem) {var AllItemList = [], mf = true, isPreOrder;Array.prototype.forEach.call(document.querySelectorAll("input[id^=rr]:Checked"),function (checkbox, i) {var itemCode, isService, item = { isPreOrder: "0" };if (!!checkbox) {itemCode = checkbox.value;if (itemCode && itemCode.length > 0) {isService = itemCode.indexOf("IN") > -1|| itemCode.indexOf("TS") > -1|| itemCode.indexOf("SNET") > -1;if (isService && itemCode.indexOf("_") > -1) {var comboId = itemCode.split("_")[1];item.itemNumber = "Combo." + comboId;mf = false;AllItemList.push(item);} else if (itemCode.indexOf("SNET") < 0 && itemCode.indexOf("DS") < 0) {item.itemNumber = itemCode;AllItemList.push(item);}}}});if (mf && mItem && !String.isNullOrEmpty(mItem)) {isPreOrder = (document.querySelector("#IsMainItemPreOrder").value || "false").toUpperCase();AllItemList.push({itemNumber: mItem,isPreOrder: isPreOrder === "TRUE" ? "1" : "0"});};return AllItemList;},getServiceEWTListValue: function (itemList, mItem, mapprice) {var EWTListValue = "",sNetItem = document.querySelector("input[name='SNET']:Checked"),STItem = document.querySelector("input[name='SquareTrade']:Checked"),dSItem = document.querySelector("input[name='DriveSaver']:Checked");sNetItem = (sNetItem && sNetItem.value) || "";STItem = (STItem && STItem.value) || "";dSItem = (dSItem && dSItem.value) || "";var hasSnetCombo = sNetItem.indexOf("_") > -1;var hasSTCombo = STItem.indexOf("_") > -1;if (itemList.length > 0 || sNetItem.indexOf('SNET') > -1 || dSItem.indexOf('DS') > -1) {if (!hasSnetCombo && !String.isNullOrEmpty(sNetItem)) {if (mapprice) {EWTListValue = sNetItem + (document.querySelector("input[name='SNET']:Checked").parentElement.parentElement.querySelectorAll("td")[2].textContent || "").trim();}else {EWTListValue = sNetItem + (String.isNullOrEmpty(mItem) ? "" : "_" + mItem);}}if (!hasSTCombo && !String.isNullOrEmpty(STItem)) {if (mapprice) {EWTListValue += sNetItem + (document.querySelector("input[name='SquareTrade']:Checked").parentElement.parentElement.querySelectorAll("td")[2].textContent || "").trim();}else {EWTListValue += sNetItem + (String.isNullOrEmpty(mItem) ? "" : "_" + mItem);}}if (!String.isNullOrEmpty(dSItem)) {var dsItemList = "";if (mapprice) {dsItemList = dSItem + (document.querySelector("input[name='DriveSaver']:Checked").parentElement.parentElement.querySelectorAll("td")[2].textContent || "").trim();}else {dsItemList = dSItem + (String.isNullOrEmpty(mItem) ? "" : "_" + mItem);}if (String.isNullOrEmpty(EWTListValue)) {EWTListValue = dsItemList;}else {EWTListValue = EWTListValue + "," + dsItemList;}}};return EWTListValue;},mapPrice: function () {if (jQuery("#ServiceGroupMapPriceLink")[0] != null) {var originalLink = jQuery("#ServiceGroupMapPriceLink").val();var tempLink = originalLink;var itemList = this.getSelectedItem();var EWTListString = this.getServiceEWTListValue(itemList, "", true);var itemListString = (itemList.length > 0) ? ("&ItemList=" + itemList.join(',')) : "";var typeFlag = itemListString != "" || EWTListString != "";tempLink += itemListString + "&EWTList=" + EWTListString;tempLink += typeFlag ? "&type=items" : "";var finalLink = "Web.UI.Control.openWindow('" + tempLink + "','_blank',605,645,0,0)";eval(finalLink);}},getSelectedItem: function (mItem) {var ItemList = [];var mf = true;Array.prototype.forEach.call(document.querySelectorAll("input[id^=rr]:Checked"),function(checkbox, i) {var itemCode, isService;if (!!checkbox) {itemCode = checkbox.value;if (itemCode && itemCode.length > 0) {isService = itemCode.indexOf("IN") > -1|| itemCode.indexOf("TS") > -1|| itemCode.indexOf("SNET") > -1;if (isService && itemCode.indexOf("_") > -1) {var comboId = itemCode.split("_")[1];ItemList.push("Combo." + comboId);mf = false;} else if (itemCode.indexOf("SNET") < 0 && itemCode.indexOf("DS") < 0) {ItemList.push(itemCode);}}}});if (mf && !String.isNullOrEmpty(mItem)) {ItemList.push(mItem);};return ItemList;},commonJS: function () {NEG.run(function (require) {var jQuery = require("NEG.ThirdParty.jQuery");var popup = require('Biz.Common.Popup');if (jQuery('.warranty-popup').length > 0) {popup('.warranty-popup', {custom: true,followCursor: true});}if (jQuery('.warranty-addtocart-popup').length > 0) {popup('.warranty-addtocart-popup', {custom: true});}if (jQuery('.driversaver-popup').length > 0) {popup('.driversaver-popup', {custom: true,followCursor: true});}if (jQuery('.snet-popup').length > 0) {popup('.snet-popup', {custom: true,followCursor: true});}var isSubscribe = window.location.search.match(/subscribepurchase=1/);if (isSubscribe) {jQuery("#servicesContent").css('display', 'none');jQuery("#extendedWarrantyOption").css('display', 'none');}});},unSelectServiceItem: function (btn, comboId) {NEG.run(function (require) {var jQuery = require("NEG.ThirdParty.jQuery");var itemNumber = jQuery(btn).attr("data-item");var cur = jQuery("input#" + itemNumber);if (cur.prop("disabled")) { return false; }cur.prop("checked", false);Biz.Product.DetailPage.clickSquareTradeCheckBox(cur[0], comboId);});},selectServiceItem: function (btn, comboId) {NEG.run(function (require) {var jQuery = require("NEG.ThirdParty.jQuery");var itemNumber = jQuery(btn).attr("data-item");var cur = jQuery("input#" + itemNumber);var position = jQuery("input#squareTradeNeedless").attr("btnPosition");if (position !== "top") {cur = jQuery("input[itemnumber='" + itemNumber.replace("CHECK_", "") + "']")[0];jQuery(cur).prop("checked", true);Biz.Product.WarrantyTabService.switchItem(cur);} else {cur.prop("checked", true);Biz.Product.DetailPage.clickSquareTradeCheckBox(cur[0], comboId);}});},buyAdditionalServiceItem: function (mItem) {NEG.run(function (require) {var jQuery = require("NEG.ThirdParty.jQuery");var needST = jQuery("input#squareTradeNeedless");var curButton = window.event.srcElement;if (jQuery(needST).prop("btnPosition") === "top") {if (jQuery(curButton).prop("class").indexOf("btn-add") > 0) {Biz.Product.WarrantyTabService.selectServiceItem(curButton, "-1");}needST.val("1");jQuery("div.call-to-action-main-product").find("button").click();} else {needST.val("1");Biz.Product.WarrantyTabService.addWarrantyTabServiceItems(mItem, 0);}});},popAddToCartButton: function (btn, comboId, mItem) {Biz.Product.WarrantyTabService.selectServiceItem(btn, comboId);Biz.Product.WarrantyTabService.buyAdditionalServiceItem(mItem);}};usingNamespace("Biz.Product")["CrossTable"] = {scrollToWarranty: function () {var o = jQuery("#Warranty_Tab");if (o.length > 0) {Biz.Product.Product2016.switchTab('Warranty_Tab');jQuery('html, body').animate({scrollTop: o.offset().top - 55}, 1000);}},scrollToServices: function () {var o = jQuery("#extWarrantyContent");if (o.length > 0) {Biz.Product.Product2016.switchTab('Warranty_Tab');var mini = jQuery("#mini-features").height();jQuery('html, body').animate({scrollTop: o.offset().top - mini}, 1000);}},scrollToServicesForSNETPopUp: function () {var o = jQuery("#extWarrantyContent");if (o.length > 0) {Biz.Product.Product2016.switchTab('Warranty_Tab');var mini = jQuery("#mini-features").height();jQuery('html, body').animate({scrollTop: o.offset().top - mini}, 1000);}NEG.trigger("SNETPop_Close");},scrollToQA: function () {var o = jQuery("#Customer-QA_Tab");if (o.length > 0) {Biz.Product.Product2016.switchTab('Customer-QA_Tab');jQuery('html, body').animate({scrollTop: o.offset().top - 55}, 600);}},};usingNamespace("Biz.Product2016")["Combine"] = {formatTotalPrice: function (price) {price = Biz.Product.DetailPage.formatMoney(price);var tmp = price.split(".");if (this.isCommonPrice2016()) {return Web.Lang.currencyCode + "<strong>" + tmp[0] + "</strong><sup>." + tmp[1] + "</sup>";}return "<span>" + Web.Lang.currencyCode + "</span>" + tmp[0] + "<sup>." + tmp[1] + "</sup>";}, isCommonPrice2016: function () {return jQuery(".price2012 .combineBox ul.price").length > 0;}};usingNamespace("Biz.Product")["AutoAddComboAndFamilyTree"] = {LoadAutoAddComboAndFamilyTree: function (itemNumber) {jQuery.ajax({url: Web.Config.Environment.Url.Content + "Common/Ajax/AutoAddComboAndFamilyTree.aspx?Item=" + itemNumber,jsonp: "action",cache: true,dataType: "jsonp",jsonpCallback: "Biz.Product.AutoAddComboAndFamilyTree.AutoAddComboAndFamilyTreeCallBack"});},AutoAddComboAndFamilyTreeCallBack: function (data) {if (data != null) {var daArray = [];if (data.indexOf("||+||+||+||") > -1) {daArray = data.split("||+||+||+||");}if (daArray.length > 0) {var similar = daArray[0].trim().replace("\r\n", "");var newerVersion = daArray[1].trim().replace("\r\n", "");var autoAddCombo = daArray[2].trim().replace("\r\n", "");if (similar.length > 0) {jQuery("#version_promo").html(similar);}if (newerVersion.length > 0) {jQuery("#newerversion").html(newerVersion);jQuery("#newerversion").css('display', 'block');}if (autoAddCombo.length > 0) {jQuery("#autoAddComboGiftContent").html(autoAddCombo);jQuery("#autoAddComboGiftContent").css('display', 'block');}}}},seePersonalizationSimilarItems: function () {jQuery('html, body').animate({ scrollTop: jQuery('#PersSimilarItem').offset().top }, 1000);try {eval(jQuery("#seeSimilarItemsButton").val());}catch (ex) { }},SeeMoreReview: function () {var review = jQuery("#Community_Tab");if (review.length > 0) {Biz.Product.Product2016.switchTab('Community_Tab');jQuery('html, body').animate({scrollTop: review.offset().top - 55}, 1000);}}};usingNamespace("Biz.Product")["Personalization"] = {init: function () {var itemNumber = jQuery("#buyBoxItemNumber").val();var itemFlag = jQuery("#persMainItemState").val();var parm;parm = "?Item=" + itemNumber;if (Web.Config.IsPersonalizationEdit) {parm += "&ispreview=" + Web.Config.IsPersonalizationEdit;}if (itemFlag == '1') {jQuery.ajax({url: Web.Config.Environment.Url.Content + "Common/Ajax/ProductPersonalization.aspx" + parm,dataType: "jsonp",jsonp: "action",cache: true,jsonpCallback: "Biz.Product.Personalization.JsonpCallBack"});}},JsonpCallBack: function (data) {jQuery("#personalizationLoader.loader").remove();jQuery("#PersSimilarItem").remove();var itemFlag = jQuery("#persMainItemState").val();var buyingComboContent = jQuery(data).filter("#buying-combo").html();var similarItemsContent = jQuery(data).filter('#SimilarItemsContent').html();var tempBuyingCombo = jQuery('#buying-combo');var tempSimilarItems = jQuery('#SimilarItemsContent');tempBuyingCombo.children().remove();tempBuyingCombo.append(buyingComboContent);var isSubscribe = window.location.search.match(/subscribepurchase=1/);if (isSubscribe !== null) {tempSimilarItems.hide();tempBuyingCombo.hide();} else {NEG.run(function (require) {var ProductPersonalization = require("Biz.Product.ProductPersonalization"),popup = require('Biz.Common.Popup');tempBuyingCombo.show();if (itemFlag == '1') {tempBuyingCombo[0].dataset.inited = true;popup('.combo-map-popup', { icon: 'info' });ProductPersonalization.initSwiper();ProductPersonalization.initSingleProduct();ProductPersonalization.initComboProduct();ProductPersonalization.initSwitchTab();}});}tempSimilarItems.children().remove();tempSimilarItems.append(similarItemsContent);NEG.run(function (require) {var popup = require('Biz.Common.Popup');popup('.cellphone-map-popup', { icon: 'info' });});},ArrowClick: function(direction) {NEG.run(function (require) {var ProductPersonalization = require("Biz.Product.ProductPersonalization");ProductPersonalization.nextSlide(direction);});}};usingNamespace("Biz.Product")["PersonalizationDeactivedItem"] = {init: function () {var itemNumber = jQuery("#persMainItemNumber").val();var itemFlag = jQuery("#persMainItemState").val();var parm;parm = "?Item=" + itemNumber;if (Web.Config.IsPersonalizationEdit) {parm += "&ispreview=" + Web.Config.IsPersonalizationEdit;}if (itemFlag == '0') {jQuery.ajax({url: Web.Config.Environment.Url.Content + "Common/Ajax/ProductPersonalizationDeactivedItem.aspx" + parm,dataType: "jsonp",jsonp: "action",cache: true,jsonpCallback: "Biz.Product.PersonalizationDeactivedItem.JsonpCallBack"});}},JsonpCallBack: function (data) {jQuery("#personalizationLoader.loader").remove();jQuery("#buying-combo").remove();var persSimilarItem = data.trim().replace("\r\n", "");var persSimilarItemContent = jQuery("#PersSimilarItem");if (persSimilarItemContent) {if (!String.isNullOrEmpty(persSimilarItem)) {persSimilarItemContent.children().remove();persSimilarItemContent.append(persSimilarItem);if (jQuery("#version_promo").html().trim().length > 0) {jQuery("#version_promo").css("display", "block");}NEG.run(function (require) {var popup = require('Biz.Common.Popup');popup('.cellphone-map-popup', { icon: 'info' });});}};}};usingNamespace("Biz.Product")["ProductBuzz2016"] = {init: function () {var itemNumber = jQuery("#buyBoxItemNumber").val();jQuery.ajax({url: Web.Config.Environment.Url.Content + "Common/Ajax/ProductBuzz2016.aspx?Item=" + itemNumber,dataType: "jsonp",jsonp: "action",cache: true,jsonpCallback: "Biz.Product.ProductBuzz2016.JsonpCallBack"});},JsonpCallBack: function (data) {var container = jQuery("#ProductBuzzContainer");var reviewData = data.trim().replace("\r\n", "");if (reviewData != "") {container.css("display", "block");container.append(reviewData);}else {container.css("display", "none");}}};usingNamespace("Biz.Product")["ShoppingInsight"] = {init: function () {var itemNumber = jQuery("#hiddenItemNumber").val();var canPreLaunch = jQuery("#hiddenCanPreLaunch").val();if (canPreLaunch == "False") {jQuery.ajax({url: Web.Config.Environment.Url.Content + "Common/Ajax/ShoppingInsight.aspx?action=Biz.Product.ShoppingInsight.ShoppingInsightCallBack",processData: false,data: "Item=" + itemNumber,cache: true,dataType: "jsonp",jsonpCallback: "Biz.Product.ShoppingInsight.ShoppingInsightCallBack"});}},ShoppingInsightCallBack: function (html) {jQuery("#bodyGrid .loader:first").hide();jQuery("#product_RelationItemInfo").html(html);}};usingNamespace("Biz.Product")["ServicePlan"] = {init: function () {var itemNumber = jQuery("#buyBoxItemNumber").val();var parm = "?Item=" + itemNumber;jQuery.ajax({url: Web.Config.Environment.Url.WWW + "Common/Ajax/ServicePlan.aspx" + parm,dataType: "jsonp",jsonp: "action",cache: true,jsonpCallback: "Biz.Product.ServicePlan.JsonpCallBack"});},JsonpCallBack: function (data) {var servicesContent = jQuery(data).filter("#servicesContent").html();var extendedWarrantyOption = jQuery(data).filter('#extendedWarrantyOption').html();var tempServicesContent = jQuery('#servicesContent');var tempExtendedWarrantyOption = jQuery('#extendedWarrantyOption');tempServicesContent.children().remove();tempServicesContent.append(servicesContent);tempExtendedWarrantyOption.children().remove();tempExtendedWarrantyOption.append(extendedWarrantyOption);Biz.Product.WarrantyTabService.commonJS();}};NEG.Module("Biz.Product.LazyLoad", function (require) {var jQuery = require("NEG.ThirdParty.JQuery"),viewprot = require("NEG.Widget.Viewport"),personalization = Biz.Product.Personalization,personalizationDeactivedItem = Biz.Product.PersonalizationDeactivedItem,moreBuyOption = Biz.Product.MoreBuyingOptions,reviewAward = Biz.Product.ProductBuzz2016,shoppingInsight = Biz.Product.ShoppingInsight;var idArr = [];return function () {var api = {init: function () {var views = [],lazyModules = [];var persFlag = jQuery("#productPersonalizationFlag").val();var mboFlag = jQuery("#moreBuyOptionFlag").val();var buzzFlag = jQuery("#productBuzzFlag").val();var insightFlag = jQuery("#shoppingInsightFlag").val();if (persFlag == "True") {var itemFlag = jQuery("#persMainItemState").val();if (itemFlag == '1') {lazyModules.push({ "buying-combo": personalization });lazyModules.push({ "SimilarItemsContent": personalization });} else if (itemFlag == '0') {lazyModules.push({ "PersSimilarItem": personalizationDeactivedItem });}} else {jQuery("#personalizationLoader.loader").remove();}var mboTrigger = jQuery("#moreBuyOptionTrigger").val();if (mboFlag == "True") {if (mboTrigger == "0") {lazyModules.push({ "newproductversion": moreBuyOption });} else if (mboTrigger == "1") {lazyModules.push({ "buying-options": moreBuyOption });} else if (mboTrigger == "2") {lazyModules.push({ "newproductversion": moreBuyOption });lazyModules.push({ "buying-options": moreBuyOption });}}if (buzzFlag == "True") {lazyModules.push({ "ProductBuzz": reviewAward });}if (insightFlag == "True") {lazyModules.push({ "product_RelationItemInfo": shoppingInsight });} else {jQuery("#bodyGrid .loader:first").remove();}for (var lmIndex = 0; lmIndex < lazyModules.length; lmIndex++) {var lmItem = lazyModules[lmIndex];for (key in lmItem) {views.push(jQuery("#" + key)[0]);}}var lazyloadViewport = viewprot(views);lazyloadViewport.on("FIRSTIN", function (dom) {var jDom = jQuery(this);if (!jDom) {return;}var jDomId = jDom.attr("id");if (!jDomId) {return;}var arrayValue;for (var lmIndex = 0; lmIndex < lazyModules.length; lmIndex++) {var lmItem = lazyModules[lmIndex];for (key in lmItem) {if (key === jDomId) {arrayValue = lmItem[key];break;}}}if (arrayValue) {if ((this.id == "buying-combo" && idArr.indexOf("SimilarItemsContent") > -1) || this.id == "SimilarItemsContent" && idArr.indexOf("buying-combo") > -1) {return;}if ((this.id == "buying-options" && idArr.indexOf("newproductversion") > -1) || this.id == "newproductversion" && idArr.indexOf("buying-options") > -1) {return;}idArr.push(this.id);arrayValue.init();}});setTimeout(function () { window.scrollBy(0, 1); }, 3000);}};return api;};});/*兼容提供给第三方的代码. Royman 知道*/usingNamespace("Biz.Product")["GroupItemSwitcher"] = {on: function (event, fn) {if (event === 'ITEM_SELECTED') {NEG.on("PROPERTY_COMPLETED", fn);NEG.on("PROPERTY_RESELECTED", fn);} else if (event === 'ITEM_DESELECTED') {NEG.on("PROPERTY_CONTINUE", fn);}}};/*Deal With Social Link*/jQuery(document).ready(function () {jQuery('.social-list-dropdown').hover(function () {if (jQuery('#ulsociallink') != null && jQuery('#ulsociallink').children().length == 1) {addSocialLink();}jQuery(this).addClass('is-active');}, function () {jQuery(this).removeClass('is-active');});});/*隐藏域的条数*/var hiddenFormCount = 11;var addSocialLink = function () {var inputHidden = jQuery("#sociallinklist");if (inputHidden == null || inputHidden.children() == null || inputHidden.children().length != hiddenFormCount) {return;}var socialLinkForm = inputHidden.children();var fbHref = socialLinkForm[0].value;var twittershare = socialLinkForm[1].value;var twitterpageurl = socialLinkForm[2].value;var pinhref = socialLinkForm[3].value;var pintimage = socialLinkForm[4].value;var googleapi = socialLinkForm[5].value;var googleplusurl = socialLinkForm[6].value;var trackingFacebook = socialLinkForm[7].value;var trackingTwitter = socialLinkForm[8].value;var trackingPinterest = socialLinkForm[9].value;var trackingGoogle = socialLinkForm[10].value;var ulhtml = StringFormat('\<li {6} class="social-btn share-facebook">\<div id="fb-root"></div>\<span class="fb-like" data-href="{0}" data-layout="button_count" data-action="like" data-show-faces="true" data-share="true"></span>\</li>\<li {7} class="social-btn share-twitter">\<a href="{1}" class="twitter-share-button" data-url="{2}" data-text="">Tweet</a>\</li>\<li {8} class="social-btn share-pinterest">\<a href="{3}" class="pin-it-button" count-layout="horizontal" target="blank">\<img border="0" src="{4}" title="Pin It" alt="Pin It" />\</a>\</li>\<li {9} class="social-btn share-google">\<div class="g-plusone" data-size="medium" data-href="{5}">\</div>\</li>', fbHref, twittershare, twitterpageurl, pinhref, pintimage, googleplusurl, trackingFacebook, trackingTwitter, trackingPinterest, trackingGoogle);jQuery('#ulsociallink').append(ulhtml);var scriptFacebook = document.createElement("script");scriptFacebook.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";scriptFacebook.setAttribute("id", "facebook-jssdk");document.body.appendChild(scriptFacebook);var twitterid = "twitter-wjs";var p = /^http:/.test(document.location) ? 'http' : 'https';if (!document.getElementById(twitterid)) {var scriptTwitter = document.createElement("script");scriptTwitter.src = p + '://platform.twitter.com/widgets.js';scriptTwitter.setAttribute("id", twitterid);document.body.appendChild(scriptTwitter);}var scriptGoogle = document.createElement("script");scriptGoogle.src = googleapi;scriptGoogle.setAttribute("gapi_processed", "true");document.body.appendChild(scriptGoogle);};function StringFormat() {if (arguments.length == 0)return null;var str = arguments[0];for (var i = 1; i < arguments.length; i++) {var re = new RegExp('\\{' + (i - 1) + '\\}', 'gm');str = str.replace(re, arguments[i]);}return str;}